openapi: 3.0.3
info:
  title: Open Delivery
  version: "1.0.0"
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0
  contact:
    name: Suporte Open Delivery
    email: suporte@opendelivery.org.br
    url: https://www.opendelivery.org.br
  x-logo:
    url: https://gui-camargo.github.io/OD/logo-open-delivery_small.png
    altText:  Open Delivery logo

  description: |-

    # Introduction

    Open Delivery is a set of REST APIs with the goal to provide standart communications between Merchants and Applications.

    ### How Open Delivery integrations work

    Open API integrations have two main components: Merchants information and Orders information.

    ### Merchants information API
    This API defines the merchant info, services and online availability of restaurants ordering as well as their menu options and services offered. The Merchant endpoint is hosted by a Software Service Company (eg. POS applications) and periodically fetched by an Ordering Application (eg. Marketplaces), ensuring up-to-date ordering information is shown to users.

    The API contains these top-level entities:

    - Basic Merchant info entities
    - Service entities
    - Menu entities (Menus, Categories, Items, Offers, OptionGroups and Availability)

    ### Merchant updates

    It is possible to send a notification to the Order Application to make a new request at the merchant endpoint and update the menu.

    ### Order events

    Open delivery provides two ways for the Software Services to receive the order events generated by the Order Application:

    Polling (required)
    Webhook (optional)

    ### Order updates

    After a new order event has been submitted, you leverage asynchronous order updates to send update notifications to users within the Food Ordering user interface.

    For example, you can notify the user that their order "status has moved from "Accepted" to "In Progress," or if the price has changed."

    ### Order Cancellation



    # Open Delivery API Evolution

    The Open Delivery API seeks to respect [SemVer](https://semver.org/). In this sense, compatible changes should not generate a new major version.

    The API version is composed of 4 elements: major, minor, patch and release candidate. The version v[x] in the URL path is the major element of the API version. The evolution of the version is as follows:

    Major: incompatible, deal-breaking changes (v1.0.0 → v2.0.0)
    Minor: compatible, non-breaking changes (v1.1.0 → v1.2.0)
    Patch: bugfixes, clarifications to specifications, no functional changes (v1.1.1 → v1.1.2)
    Release candidate: pre-release versions of any future patch, minor or major (v1.0.0-rc.1 → v1.0.0-rc.22)
    Non-breaking changes and clarifications to specifications may occur at any time. Customers should be prepared to handle these changes without breaking.

    The following changes are expected and considered backward compatible:

    - Addition of new features to the Open Delivery API;
    - Addition of new optional parameters;
    - Addition of new fields in Open Delivery API responses;
    - Change of the order of fields;
    - Addition of new elements in enumerations.


    # Error Handling

    The API returns HTTP status codes to indicate success or failure of requests.

    `2xx` codes indicate success. 
    `4xx` codes indicate failure caused by the information sent by the client or the current state of the entities.
    `5xx` codes codes indicate service problems on the API side.

    The error responses include in the body details of the error following the
    _schema_ of [RFC 7807](https://tools.ietf.org/html/rfc7807).

    ## General

    This section gathers errors that could be returned by any endpoints listed in the API.

    ### `InvalidRequest`

      * __Significado__: Invalid request.
      * __HTTP Status Code__: [400 Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1).

    ### `AccessDenied`

      * __Significado__: Authenticated participant request that violates some authorization rule.
      * __HTTP Status Code__: [403 Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3).

    ### `NotFound`

      * __Significado__: Entity not found.
      * __HTTP Status Code__: [404 Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4).

    ### `PermanentlyRemoved`

      * __Significado__: Indicates that the entity existed, but has been permanently removed.
      * __HTTP Status Code__: [410 Gone](https://tools.ietf.org/html/rfc7231#section-6.5.9).

    ### `InternalServerError`

      * __Significado__: Unexpected condition when processing requisition.
      * __HTTP Status Code__: [500 Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1).

    ### `ServiceUnavailable`

      * __Significado__: Service is not currently available. Requested service may be under maintenance or outside the operating window.
      * __HTTP Status Code__: [503 Service Unavailable](https://tools.ietf.org/html/rfc7231#section-6.6.4).

    ### `UnavailabilityByTime`

      * __Significado__: It indicates that the service took longer than expected to return.
      * __HTTP Status Code__: [504 Gateway Timeout](https://tools.ietf.org/html/rfc7231#section-6.6.5).
   
#    ## Orders Erros
#    Reúne erros dos endpoints que tratam do gerenciamente dos Webhooks da API.
#
#    ### `WebhookOperacaoInvalida`
#    * __Significado__: a presente requisição busca criar um webhook sem respeitar o schema ou,
#    ainda, apresenta semântica inválida.
#    * __HTTP Status Code__: [400](https://tools.ietf.org/html/rfc7231#section-6.5.1).
#    * __endpoints__: `PUT /webhook/{chave}`.
#
#    __Violações__ para o endpoint `PUT /webhook/{chave}`:
#      - o parâmetro {chave} não corresponde a uma chave DICT válida.
#      - o parâmetro {chave} não corresponde a uma chave DICT pertencente a este usuário recebedor.
#      - Campo webhook.webhookUrl não respeita o schema.
#
#    ### `WebhookNaoEncontrado`
#
#    * __Significado__: o webhook denotado por {chave} não encontra-se estabelecido.
#    * __HTTP Status Code__: [404](https://tools.ietf.org/html/rfc7231#section-6.5.4).
#    * __endpoints__: `GET /webhook/{chave}`,  `DELETE /webhook/{chave}`
#
#    ### `WebhookConsultaInvalida`
#
#    * __Significado__: os parâmetros de consulta à lista de webhooks ativados não respeitam o schema
#    ou não fazem sentido semanticamente.
#    * __HTTP Status Code__: [400](https://tools.ietf.org/html/rfc7231#section-6.5.1).
#    * __endpoints__: `GET /webhook`.
#
#    __Violações__ específicas para o endpoint `GET /webhook`:
#      - algum dos parâmetros informados para a consulta não respeita o _schema_.
#      - o _timestamp_ representado pelo parâmetro `fim` é anterior ao timestamp
#      representado pelo parâmetro `inicio`.
#      - o parâmetro `paginacao.paginaAtual` é negativo.
#      - o parâmetro `paginacao.itensPorPagina` é negativo.

tags:
  - name: authentication
    x-displayName: "Authentication"
    description: |    
        Open Delivery suports **OAuth 2**.
        <!-- ReDoc-Inject: <security-definitions> -->

        ### Generating a Client Credentials Token

        To generate a client credentials token, retrieve your client_id and client_secret for your app from your Ordering Application Company and see the [endpoint](#operation/getToken) below.

        ### Usage

        The **accessToken** field will contain the token used to authenticate against the Open Delivery APIs. Once you’ve obtained this token, you can provide it in the “Authorization” header of requests you make to endpoints that require client credentials scopes.

        The **expiresIn** field indicates the lifetime of the access token, provided in seconds. This should be cached and re-used across requests until (or shortly before) expiration, not re-generated per request.
        
        ```
        curl \
          -H 'authorization: Bearer <TOKEN>' \
          https://{baseURL}/v1/events:polling
        ``` 
        
        
        Refresh Token is not available.

  - name: merchantOverview
    x-displayName: Merchant Overview
    description: |-

      The Merchant entity will be the entity used by the ordering applications to fetch all the data from a merchant and display it to the user.
      It is the responsibility of the merchant software service to provide the endpoint and the responsibility of the ordering application to fetch the information.

      ## Usage

      Flow + Explanations about updates (TTL + Webhook + Order Denials)

      ## Health Check

      Health Check Information

  - name: merchantStructure
    x-displayName: Merchant Structure
    description: |-

      The structure of the Merchant model consists of the following top-level entities:

      - **BasicInfo**: Information about the merchant.
      - **Services entities**: Timing, location, and conditions of the merchant service.
      - **Menu entities**: Details of the merchnat menus.

      The following diagram shows how Service, Merchant Info, and Menu entities represent a single merchant:

      imagem

      ### General guidelines

      **DateTime and Time values**: For properties that require a DateTime or Time value, use the formats specified in DateTime and Time formats. For example, 2017-05-01T06:30:00+05:30 for DateTime and T08:08:00+05:30 for Time.

      **IDs**: Use an @id property to identify all unique entities within an entity type. An @id is a unique identifier of the entity of that type, but across entities, IDs can overlap.

      **Null** values: Do not use the value null in place of objects. If an object is optional, you must omit it from your feed.


      # BasicInfo

      A merchant BaiscInfo entity defines properties such as the merchant name, location address, website, description, telephone number, for a merchant that the Software Services serves. Typically, this data is static.

      Model with example.

      # Service

      The Service entity defines the capabilities of a delivery organization in a geographic region.
      A Service entity defines properties such as the service type, hours available, and area served. 
      Service entity is expected to change.

      Figure 1: Service entity showing its relationship with ServiceArea, ServiceHours, OperationHours, and Fee entities.

      Model with example.

      # Menu

      A Menu entity defines properties such as menu categories, items, offers and availability .

      Figure 1: Menu entity showing its relationship with MenuSection, Availability, MenuItem, MenuItemOption, and MenuItemOffer.
      
      Each menu item can include a description, image, add-ons, and nutrition information. Offers are used to price the menu item, define times when the item is available, and define times when special prices are active. 
      
      Data in a Menu entity is expected to change.

      ### Item

      A Item entity is the catalog entity that carries all the general item information. They are:
      Name, description, external code, image, availability in shifts, size, food restrictions, and EAN (European Article Number), used mainly by marketplaces.
      The product can be offered in a catalog as a main item or an add-on. And, for the same store, it can even be reused in different catalogs.


      ### Category

      Category is the entity in which the store has to organize its items in order to make it easier for the user to find what he wants to buy. Categories have sales statuses such as paused and activated.
      
      ### ItemOffer

      The ItemOffer can be considered the offering of a item.
      Analogous to the complement, the itemOffer is a item related to the category.

      ### OptionGroup and Option

      The add-on group is the entity used to group customizations of a product, for example: "Choose your beverage:"
      An add-on group can be shared by several items.

      Complements are the options of a Complement Group. It can be defined as: "A item related to a complement group". The add-on has its own sales status, and can be paused or activated when needed. It is possible for a complement to be R$0.00 regardless of whether it is mandatory or optional.

      ### Availability

      For products that are only sold on certain periods of the week, it is possible to configure their availability in shifts. For example:
      Pizza is only sold on Wednesdays from 10:00 AM to 4:00 PM.

      Always available
      When an item is selected as always available, it will be displayed whenever the store is open and the sales status (As main or add-on item) is activated.

    externalDocs:
      description: Explicação dos fluxos
      url: http://www.google.com.br

      

  - name: merchantEndpoints
    x-displayName: Merchant API
    description: |-

  - name: ordersOverview
    x-displayName: Order Overview
    description: |-

      "This overview summarizes the Open Delivery Ordering flow and how it interacts with Software Services and Ordering Applications.

      The order flow has the following Macro steps:

      ### Order Event Reception

      Through Order Events, the 'Order Application' communicates to the 'Software Service' the existence of a new order, as well as the other events of the order lifecycle.

      Open Delivery provides two ways for Software Services to be aware of new events:

      - Polling: 
      Receiving events through polling provided by the 'Order Application' is the standard way Open Delivery works, and its implementation is mandatory.

      - Webhook:
        Optionally it is recommended to implement a 'webhook' by the Software Services for the Order Applications to send the new events directly, ensuring a much faster communication.
      
        As this implementation is not mandatory, it is recommended that merchant software services contact the Order Applications to find out if it is possible to work with this possibility.

      ### Status Updates

      After receiving the new order event, the merchant needs to notify the 'Order Application' of its progress.

      Through the Open Delivery API's it is possible:

      - Confirm receipt of order;
      - Notify that an order is ready for pickup;
      - Notify that an order has been shipped.

      Whenever a merchant triggers one of these actions, the 'Order Application' will send a new event to the 'Software Service', informing the new order status within the 'Order Application'.

      ### Order Cancellation

      Open Delivery provides API's to make cancellation requests from either party.
      These requests can be accepted or denied depending on the rules that the company has.
      
  - name: ordersWebhook
    x-displayName: Webhook
    description: |-

        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce non justo mi. Ut luctus nisl ac magna vulputate posuere. Cras dictum leo at turpis consectetur blandit. Ut id dui in justo iaculis ultricies. Duis at eros eu felis maximus aliquam. Etiam at metus sed nibh feugiat aliquet. Nullam quis nisi erat. Mauris feugiat tempus nulla vitae venenatis. Donec vel orci in metus tristique volutpat a a erat.
          <div align="center">
            <img alt="Workflow" src="https://user-images.githubusercontent.com/80956588/113513032-f459c680-953d-11eb-8ac3-9422e9970d0f.png" />
          </div>

  - name: ordersPolling
    x-displayName: Polling
    description: |-

          Receiving events via Polling works as follows:

          <div align="center">
            <img alt="Workflow" src="https://user-images.githubusercontent.com/80956588/114452490-ded44480-9bae-11eb-9eaf-1fd8e7c7f142.png" />
          </div>

          ### Query new order events

          In order to receive new order events, the 'Software Service' must make requests on the polling endpoint regularly at a certain time interval, determined by the 'Order Application'. 
          Whenever there is a new event the response will send the response code 200 with the list of events. If there are no new events, the response will send the response code 204.

          It is important that the Software Service performs the requests within the timeframe determined by the 'Request Application', as blocking and penalties may occur depending on the application's rules.
          
          Availability of new events in polling: The 'Order Application' may have specific rules about the maximum time new events are available in polling before they are removed.
             
          Always check with the Order Application what the rules are for using the polling service. 

          Duplicate Events and Order Date:
          Eventually the API may return the same event more than once, for example the PLACED event including old orders. For this reason it is important that your application handles the uniqueness of requests and events through "id" and the date through "createdAt".

          Therefore, when receiving an event, you must check the event id and validate that this event (id) has not been processed before. If this event has already been received previously, it must be discarded.

          Please note: you should only accept a new order or update the status of an order after validating that the event has not been processed before.

          ### Acknowledgment Events

          When receiving new events, the 'Software Service' should always send acknowledgement so that the API does not send that same event again;

          Important recommendations:

          Make an acknowledgment request for each polling request with results.
          If you receive events that are not used by your application, send the acknowledgment of these events anyway so that you are not receiving them every polling again. We recommend that this be the default treatment for all events not yet mapped in your application.
          You only need to send acknowledgment of the event once.
      
  - name: ordersDetails
    x-displayName: Order Details
    description: |-

        Order details parameters and responses.

  - name: ordersStatus
    x-displayName: Status Update
    description: |-

        Update Endpoints

  - name: ordersCancellation
    x-displayName: Cancellation
    description: |-

        Cancellation Endpoints

  - name: payment
    x-displayName: Payment Endpoint
    description: |-

        Conciliation Endpoint

  - name: menuEntitiesModel
    x-displayName: Menu Entities Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/MenuEntity" />

  - name: merchantModel
    x-displayName: Merchant Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Merchant" />

  - name: serviceModel
    x-displayName: Service Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Service" />

  - name: menuModel
    x-displayName: Menu Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Menu" />

  - name: itemModel
    x-displayName: Items Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Item" />

  - name: categoryModel
    x-displayName: Categories Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Category" />  

  - name: itemOfferModel
    x-displayName: Items Offers Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/ItemOffer" />

  - name: optionGroupModel
    x-displayName: Option Groups Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/OptionGroup" />

  - name: availabilityModel
    x-displayName: Availability Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Availability" />

  - name: orderModel
    x-displayName: Order Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Order" />       

  - name: eventModel
    x-displayName: Event Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Event" /> 

  - name: repositoryOverview
    x-displayName: Repository Overview
    description: |-

      The goal of the repository is to centrally host the information of Open Delivery participants.
      Through an adhesion form a restaurant and its software house can perform a registration that will be available in a database of participants.
      The indexing system will search the URL previously registered at the moment of the adhesion that will be available in the endpoint /repository listing the registered restaurants.
    
      <div align="center">
        <img alt="Repository" src="https://i.ibb.co/xMv0NfD/repo-image.png" />
      </div>
      ## How to Access

      Instruções em como acessar o repositório

x-tagGroups:
  - name: ""
    tags:
      - authentication
  - name: Merchant
    tags:
      - merchantOverview
      - merchantStructure
      - merchantEndpoints
  - name: Orders
    tags:
      - ordersOverview
      - ordersPolling
      - ordersWebhook
      - ordersDetails
      - ordersStatus
      - ordersCancellation
  - name: Payments
    tags:
      - payment
  - name: Repository
    tags:
      - repositoryOverview
  - name: Models
    tags:
      - menuEntitiesModel
      - merchantModel
      - serviceModel
      - menuModel
      - itemModel
      - categoryModel
      - itemOfferModel
      - optionGroupModel
      - availabilityModel
      - orderModel
      - eventModel

paths:
  /oauth/token:
    get:
      operationId: "getToken"
      tags:
      - "authentication"
      summary: "Get token"
      description: |-
          Endpoint to query the merchants of an establishment          
      requestBody:
          $ref: "#/components/requestBodies/Token"  
      responses:
        "200":
          description: "Successful token request."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/TokenResponse"
        "401":
          description: "Bad credentials"
        "500":
          description: "Unexpected error"

  /merchant:
    get:
      parameters:
        - in: "query"
          name: "inicio"
          required: true
          schema:
            $ref:  "#/components/schemas/Generico"
        - in: "query"
          name: "fim"
          required: true
          schema:
            $ref:  "#/components/schemas/Generico"
        - name: "cpf"
          in: "query"
          schema:
            type: "string"
            title: "CPF"
            pattern: "/^\\d{11}$/"
            description: "Filtro pelo CPF do devedor. Não pode ser utilizado ao mesmo tempo que o CNPJ."
        - name: "cnpj"
          in: "query"
          schema:
            type: "string"
            title: "CNPJ"
            pattern: "/^\\d{14}$/"
            description: "Filtro pelo CNPJ do devedor. Não pode ser utilizado ao mesmo tempo que o CPF."
        - name: "locationPresente"
          in: "query"
          schema:
            type: "boolean"
        - name: "status"
          in: "query"
          schema:
            type: "string"
            title: "Status da Cobrança"
            description: "Filtro pelo status da cobrança."
      tags:
      - "merchantEndpoints"
      summary: "Get Info, Services and Menus of a Merchant"
      security:
        - OAuth2: [od.all]  
      description: |-
          Endpoint to query all data for a specific merchant, such as basic data, menus, and services

          Colocar informações sobre o TTL 
      responses:
        "200":
          description: "Lista de cobranças imediatas."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/MenuEntity"
              examples:
                getCobs1:
                  $ref: "#/components/examples/getCobs1"
                getCobs2:
                  $ref: "#/components/examples/getCobs2"
        "403":
          $ref: "#/components/responses/AcessoNegado"
        "503":
          $ref: "#/components/responses/ServicoIndisponivel"

  /merchantList:
    get:
      tags:
        - "repositoryOverview"
      summary: "Returns the name and URL of the merchant."
      security:
        - OAuth2: [od.all]
      description: |-
        Endpoint responsible for returning merchants and their URLs, if registered.
      responses:
        "200":
          description: "Successfully returns the merchant list."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/ListMerchant"
        "400":
          description: "Invalid Order Supplied."
        "404":
          description: "Order Not Found."
        "500":
          description: "Internal Server Error."
  /healthCheck:
    get:
      parameters:
        - in: "query"
          name: "merchantId"
          required: true
          schema:
            $ref:  "#/components/schemas/Merchant/properties/@id"
      tags:
      - "merchantEndpoints"
      summary: "Get a Health Check on an merchant info"
      security:
        - OAuth2: [od.all]  
      description: |-
          Endpoint to query all data of a specific merchant, basic commodities, menus and services
      responses:
        "200":
          description: "Lista de cobranças imediatas."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/Generico"
              examples:
                getCobs1:
                  $ref: "#/components/examples/getCobs1"
                getCobs2:
                  $ref: "#/components/examples/getCobs2"
        "403":
          $ref: "#/components/responses/AcessoNegado"
        "503":
          $ref: "#/components/responses/ServicoIndisponivel"          
  
  "/events:polling":
    get:
      tags:
      - "ordersPolling"
      summary: "Get Events"
      security:
        - OAuth2: [od.all]  
      description: 
        "Polls events for any orders from merchants associated with the authenticated user.
        Each event received from this endpoint must be properly acknowledged, otherwise it will continue to be returned on further requests.
        In the body of the request, send an array containing only the event ids. Each request accepts a list of at most 2000 event ids."
      responses:
        "200":
          description: "lista dos Pix recebidos de acordo com o critério de busca."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/Generico"
              examples:
                getCobs1:
                  $ref: "#/components/examples/getPix1"
        "403":
          $ref: "#/components/responses/AcessoNegado"
        "503":
          $ref: "#/components/responses/ServicoIndisponivel"

  /acknowledge:
    post:
      parameters: 
        - name: "@id"
          in: "query"
          schema:
            allOf:
              - $ref: "#/components/schemas/Generico"
              - pattern: "[a-zA-Z0-9]{1,35}"
      tags:
      - "ordersPolling"
      summary: "Ack Events"
      security:
        - OAuth2: [od.all]  
      description: 
        Acknowledge a set of events, dismissing them from future polling calls.
      responses:
        "200":
          description: "lista dos Pix recebidos de acordo com o critério de busca."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/Generico"
              examples:
                getCobs1:
                  $ref: "#/components/examples/getPix1"
        "403":
          $ref: "#/components/responses/AcessoNegado"
        "503":
          $ref: "#/components/responses/ServicoIndisponivel"

  /orders/{orderId}:
    get:
      parameters: 
        - name: "orderId"
          required: true
          in: "path"
          schema:
            type: "string"
            format: "UUID"
      tags:
      - "ordersDetails"
      summary: "Get Order Details"
      security:
        - OAuth2: [od.all]
      description: "Endpoint to consult the details of an order."
      responses:
        "200":
          description: "Order returning success."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/Order"
        "400":
          description: "Invalid Order Supplied."
        "404":
          description: "Order Not Found."
        "500":
          description: "Internal Server Error."
        
  /orders/{orderId}/confirm:
    post:
      parameters: 
        - name: "@id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "UUID"
      requestBody:
          $ref: "#/components/requestBodies/ConfirmedOrder"
      tags:
      - "ordersStatus"
      summary: "Confirm"
      security:
        - OAuth2: [od.all]  
      description: "Confirms receipt of order."
      responses:
        "200":
          description: "Order confirmed."
        "500":
          description: "Internal Server Error."

  /orders/{orderId}/cancelRequest:
    post:
      parameters: 
        - name: "@id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "UUID"
      requestBody:
          $ref: "#/components/requestBodies/CancelRequest"
      tags:
      - "ordersCancellation"
      summary: "Request order cancellation"
      security:
        - OAuth2: [od.all]  
      description: "Request order cancellation."
      responses:
        "200":
          description: "Order cancellation requested."
        "500":
          description: "Internal Server Error."

  /orders/{orderId}/cancelAccepted:
    post:
      parameters: 
        - name: "@id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "UUID"
      tags:
      - "ordersCancellation"
      summary: "Accept order cancellation"
      security:
        - OAuth2: [od.all]  
      description: "Accept order cancellation"
      responses:
        "200":
          description: "Order cancellation confirmed."
        "500":
          description: "Internal Server Error."

  /orders/{orderId}/cancelDenied:
    post:
      parameters: 
        - name: "@id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "UUID"
      requestBody:
          $ref: "#/components/requestBodies/CancelDenied"
      tags:
      - "ordersCancellation"
      summary: "Request order denied"
      security:
        - OAuth2: [od.all]  
      description: "Request order denied."
      responses:
        "200":
          description: "Denied cancellation order confirmed."
        "500":
          description: "Internal Server Error." 

  /orders/{orderId}/dispatch:
    post:
      parameters: 
        - name: "@id"
          in: "query"
          schema:
            allOf:
              - $ref: "#/components/schemas/Generico"
              - pattern: "[a-zA-Z0-9]{1,35}"
      tags:
      - "ordersStatus"
      summary: "Dispatch"
      security:
        - OAuth2: [od.all]  
      description: "Informa despache do pedido"
      responses:
        "200":
          description: "lista dos Pix recebidos de acordo com o critério de busca."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/Generico"
              examples:
                getCobs1:
                  $ref: "#/components/examples/getPix1"
        "403":
          $ref: "#/components/responses/AcessoNegado"
        "503":
          $ref: "#/components/responses/ServicoIndisponivel"

  /orders/{orderId}/readyForPickup:
    post:
      parameters: 
        - name: "@id"
          in: "query"
          schema:
            allOf:
              - $ref: "#/components/schemas/Generico"
              - pattern: "[a-zA-Z0-9]{1,35}"
      tags:
      - "ordersStatus"
      summary: "Ready For Pickup"
      security:
        - OAuth2: [od.all]  
      description: "Informs you that the order is ready for pickup"
      responses:
        "200":
          description: "lista dos Pix recebidos de acordo com o critério de busca."
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/Generico"
              examples:
                getCobs1:
                  $ref: "#/components/examples/getPix1"
        "403":
          $ref: "#/components/responses/AcessoNegado"
        "503":
          $ref: "#/components/responses/ServicoIndisponivel"
  
  /repository:
    get:
        operationId: "merchant"
        tags:
        - "repositoryOverview"
        summary: "List companies under a Menu Holder"
        description: |-
            This endpoint MUST be provided by the Menu Holder Company.

            Endpoint used by the indexing system to list the restaurants under a menu manager.
        responses:
          "200":
            description: "Companies Info"
            content:
              "application/json":
                schema:
                  type: array
                  items:
                    $ref: "#/components/schemas/Repository"
          "403":
            $ref: "#/components/responses/AcessoNegado"
          "404":
            $ref: "#/components/responses/NaoEncontrado"
          "503":
            $ref: "#/components/responses/ServicoIndisponivel"

x-webhooks:
  menuUpdated:
    post:
      summary: New menu update
      description: Information about a update in the systems
      operationId: newEvent
      tags: 
        - merchantEndpoints
      responses:
        "200":
          description: Return a 200 status to indicate that the data was received successfully

  newEvent:
    post:
      summary: New event
      description: Information about a new event in the systems
      operationId: newEvent
      tags: 
        - ordersWebhook
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Event"
      responses:
        "200":
          description: Return a 200 status to indicate that the data was received successfully                     

components:

  securitySchemes:
    OAuth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: oauth/token
          scopes:
            od.all: "Access to all Open Delivery APIs"      
  
  requestBodies:
    Token:
      required: true
      content:
        "application/x-www-form-urlencoded":
          schema:
            $ref: "#/components/schemas/TokenRequest"

    ConfirmedOrder:
      description: "Order confirmation."
      content:
        "application/json":
          schema:
            $ref: "#/components/schemas/OrderConfirmed"
    CancelRequest:
      description: "Request to order cancelled."
      required: true
      content:
        "application/json":
          schema:
            $ref: "#/components/schemas/RequestCancelled"
    CancelDenied:
      description: "Request to cancel order denied."
      required: true
      content:
        "application/json":
          schema:
            $ref: "#/components/schemas/RequestDenied"  
  responses:
    RequisicaoInvalida:
      description: "Problemas na requisição."
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Generico'
    NaoEncontrado:
      description: "Recurso solicitado não foi encontrado."
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Generico'
          examples:
            exemplo1:
              $ref: "#/components/examples/NaoEncontradoExample1"
    AcessoNegado:
      description: "Requisição de participante autenticado que viola alguma regra de autorização."
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Generico'
          examples:
            exemplo1:
              $ref: "#/components/examples/AcessoNegadoExample1"
    ServicoIndisponivel:
      description: "Serviço não está disponível no momento. Serviço solicitado pode estar em manutenção ou fora da janela de funcionamento."
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Generico'
          examples:
            exemplo1:
              $ref: "#/components/examples/ServicoIndisponivelExample1"
  
  schemas:
    TokenRequest:
      type: "object"
      title: "TokenRequest"
      required: [""]
      properties:
        clientId:
          type: "string"
          format: "date-time"
          description:  "The last modified date and time in ISO timestamp format but with type String. \n\nThis should be used in conjuction of the TTL field to update the information on the ordering aplication."
        clientSecret:
          type: "integer"
          description:  "Time to Live (in seconds). 
          \nMin: 500
          Max: 86400. 
          \nA new request must be done when the TTL expires."
        grantType:
          type: "string"
          description:  "Time to Live (in seconds)." 
          enum:
            - "clientCredentials"

    TokenResponse:
      type: "object"
      title: "TokenResponse"
      required: [""]
      properties:
        accessToken:
          type: "string"
          format: "date-time"
          description:  "The last modified date and time in ISO timestamp format but with type String. \n\nThis should be used in conjuction of the TTL field to update the information on the ordering aplication."
        tokenType:
          type: "integer"
          description:  "Time to Live (in seconds). 
          \nMin: 500
          Max: 86400. 
          \nA new request must be done when the TTL expires."
        expiresIn:
          type: "integer"
          description:  "Time to Live (in seconds). 
          \nMin: 500
          Max: 86400. 
          \nA new request must be done when the TTL expires."    

    MenuEntity:
      type: "object"
      title: "MenuEntity"
      required: ["lastUpdate", "TTL", "merchant","services", "items", "menus", "categories", "itemOffers"]
      properties:
        lastUpdate:
          type: "string"
          format: "date-time"
          description:  "The last modified date and time in ISO timestamp format but with type String. \n\nThis should be used in conjuction of the TTL field to update the information on the ordering aplication."
        TTL:
          type: "integer"
          description:  "Time to Live (in seconds). 
          \nMin: 500
          Max: 86400. 
          \nA new request must be done when the TTL expires."
          
        merchant:
          type: "object"
          description:  "A required entity to implement. Describes a merchant."
          allOf:
            - $ref: "#/components/schemas/Merchant"
        services:
          type: "array"
          description:  "A required entity to implement. Describes food ordering services details for a merchant."
          items:           
            $ref: "#/components/schemas/Service" 
        items:
          type: "array"
          description:  "A required entity to implement. Describes an array of items. To be used with an `ItemOffer` or an `Option`."
          items:
            $ref: "#/components/schemas/Item" 
        menus:
          type: "array"
          description:  "A required entity to implement. Describes an array of menus."
          items:
            $ref: "#/components/schemas/Menu"
        categories:
          type: "array"
          description:  "A required entity to implement. Describes an array of sections in the menu where `ItemOffers` will be showed."
          items:
            type: "object"            
            $ref: "#/components/schemas/Category" 
        itemOffers:
          type: "array"
          description:  "A required entity to implement. Describes an array of offers for the `Items`."
          items:
            type: "object"            
            $ref: "#/components/schemas/ItemOffer"
        optionGroups:
          type: "array"
          description:  "An optional entity to implement. Describes additional options of an `ItemOffer`."
          items:
            $ref: "#/components/schemas/OptionGroup"
        availability:
          type: "array"
          description:  "An optional entity to implement. Describes the time period during which a `Category` or an `ItemOffer` entity is served."
          items:
            type: "object"            
            allOf:
              - $ref: "#/components/schemas/Availability"
    Merchant:
      type: "object"
      title: "Merchant"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "Unique Identifier. Must be formatted with `Merchant Document + UUID`
          \n\n This @id must be generated by the company responsible for the merchant's menu and have to be informed in the Order object by the ordering application."
        "@type":
          type: "string"
          enum:
          - MERCHANT
        status:
          type: "string"
          description:  "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."    
          enum:
            - AVAILABLE
            - UNAVAILABLE    
        name:
          type: "string"
          description:  "Public Name"
          maxLength: 500
        document:
          type: "string"
          description:  "Document"
          pattern: "/^\\d{14}$/"
        corporateName:
          type: "string"
          description:  "Corporate Name"
          maxLength: 500
        description:
          type: "string"
          description:  "Merchant Description"          
        averageTicket:
          type: "number"
          description:  "Average Ticket. Can be used to show the price range of items available at the merchant."          
        averagePreparationTime:
          type: "number"
          description:  "Average amount of time preparing an order takes, in minutes." 
        minOrderValue:
          type: "object"
          description:  "Minimum order value that the merchant accepts." 
          allOf:
            - $ref: "#/components/schemas/Price"
        merchantType:
          type: "string"
          description:  "Merchant Type"
          enum:
            - "RESTAURANT"
            - "STORE"
        merchantCategories:
          type: "array"
          description:  "Merchant Categories"
          items:
            type: "string"
            enum:
              - "JAPANESE"
              - "PIZZA"
              - "HAMBURGUERS"           
        address:
          type: "object"
          description:  "Address"
          allOf:
            - $ref: "#/components/schemas/Address" 
        contactEmails:
          type: "array"
          description: "Contact Emails"
          items:
            type: "string"
        contactPhones:
          type: "object"
          description:  "Contact Phones"
          allOf:
            - $ref: "#/components/schemas/ContactPhones"
        logoURL:
          type: "string"
          format: "uri"
          description:  "URL pointing to an image of the merchant logo.\n\n Image requirements:
                          \n - Hosted on a secure connection (SSL).
                          \n - File size must be less than 10MB.
                          \n - Image must be in JPEG, PNG or GIF format.
                          \n - Both width and height must be between 320px and 1144px."
        bannerURL:
          type: "string"
          format: "uri"
          description:  "URL pointing to an image of the merchant banner.\n\n Image requirements:
                          \n - Hosted on a secure connection (SSL).
                          \n - File size must be less than 10MB.
                          \n - Image must be in JPEG, PNG or GIF format.
                          \n - Both width and height must be between 320px and 1144px."
        createdAt:
          type: "string"
          format: date-time
          description:  "Merchant creation date in ISO timestamp format but with type String."    
    ListMerchant:
      type: "array"
      title: "MerchantList"     
      required: ["merchantId"]
      items:
        type: "object"
        properties:
          "merchantId":
            type: "string"
            format: "UUID"
          "name":
            type: "string"
            description: "Restaurant Name"
          "merchantUrl":
            type: "string"
            description: "Optional URL Optional merchant URL."
    Address:
      type: "object"
      title: "Address"
      required: ["country"]
      properties:
        "country":
          type: "string"
          pattern: "^[A-Z]{2}$"
          description:  "Two-letter ISO 3166-1 alpha-2 country code."
        "state":
          type: "string"
          description:  "State"
        "city":
          type: "string"
          description:  "City"
        "district":
          type: "string"
          description:  "District"
        "street":
          type: "string"
          description:  "Street"                      
        "number":
          type: "string"
          description:  "Number" 
        "postalCode":
          type: "string"
          description:  "Postal Code" 
        "complement":
          type: "string"
          description:  "Complement" 
        "latitude":
          type: "number"
          description:  "Latitude in degrees. Values are restricted to the range [[-90, 90]].\n\n\n\nThe precision should be at least 5 decimal places." 
        "longitude":
          type: "number"
          description:  "Longitude in degrees. Values are restricted to the range [[-180, 180]].\n\n\n\nThe precision should be at least 5 decimal places."

    ContactPhones:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "commercialNumber":
          type: "string"
          description:  "Telephone number of the merchant"
        "whatsappNumber":
          type: "string"
          description:  "Whatsapp number of the merchant"         
         
    Service:
      type: "object"
      title: "Service"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "Unique Identifier"
        "@type":
          type: "string"
          enum:
          - "SERVICE"
        status:
          type: "string"
          description:  "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."    
          enum:
            - AVAILABLE
            - UNAVAILABLE  
        serviceType:
          type: "string"
          description:  "The type of service being offered."
          enum:
            - DELIVERY
            - TAKEOUT
        menuId:
          description:  "The @id value of the `Menu` entity correlated to this `Service` entity."
          $ref: "#/components/schemas/Menu/properties/@id"     
        serviceArea:
          type: "object"
          description:  "A conditional entity to implement (required if the Service entity associated has serviceType set to \"DELIVERY\"). Describes the geographical region in which food can be delivered."
          allOf:
            - $ref: "#/components/schemas/ServiceArea"  
        serviceAreaFee:
          type: "object"
          description:  "A conditional entity to implement (required if the Service entity associated has serviceType set to \"DELIVERY\"). Describes a fee per Radius."
          allOf:
            - $ref: "#/components/schemas/ServiceAreaFee"       
        serviceHours:
          type: "object"
          description:  "A required entity to implement. Describes the time window which users can place orders."
          allOf:
            - $ref: "#/components/schemas/ServiceHours"  

    ServiceArea:
      type: "object"
      title: "Service Area"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the service area."
        "@type":
          type: "string"
          enum:
          - "SERVICE_AREA"
        polygon:
          type: "array"
          items:
            type: "string"
            pattern: "^([+-]?([0-9]*[.])?[0-9]+[ ]+){2}([+-]?([0-9]*[.])?[0-9]+[ ]*)*$"
            description: "A polygon or multipolygon expressed as a series of three or more space delimited points. It is recommended that the first and last points be the same, but it is not required.\n\n\n\nEach point in a polygon or multipolygon is defined by a latitude point followed by a longitude point. You also must specify the points in a counter-clockwise direction."
        geoMidpointLatitude:    
          type: "number"
          description:  "Indicates the latitude coordinate at the center of the CIRCLE area."
        geoMidpointLongitude:    
          type: "number"
          description:  "Indicates the longitude coordinate at the center of the CIRCLE area."
        geoRadius:    
          type: "integer"
          description:  "Indicates the approximate radius (in meters) of the CIRCLE area."              

          
    ServiceAreaFee:
      type: "object"
      title: "Service Area Fee"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the entity describing the fee"
        "@type":
          type: "string"
          enum:
          - "SERVICE_AREA_FEE"
        geoMidpointLatitude:    
          type: "number"
          description:  "Indicates the latitude coordinate at the center of the CIRCLE area."
        geoMidpointLongitude:    
          type: "number"
          description:  "Indicates the longitude coordinate at the center of the CIRCLE area."
        value:
          type: "array"
          description:  "Price of the fee per Radius."
          items:
            type: "object"
            allOf:
              - $ref: "#/components/schemas/ServiceAreaFeeValue"  

    ServiceAreaFeeValue:
      type: "object"
      title: "Service Area Fee Value"
      required: ["@id","@type"]
      properties:
        geoRadius:    
          type: "integer"
          description:  "Indicates the approximate radius (in meters) of the CIRCLE area."    
        price:
          type: "object"
          description:  "Price of the fee"
          allOf:
            - $ref: "#/components/schemas/Price"

    Price:
      type: "object"
      title: "Price"
      required: ["@id","@type"]
      properties:
        value:    
          type: "number"
          description:  "Price value. 4 decimals places are accepted"
        currency:
          type: "string"
          pattern: "^[A-Z]{3}$"
          description:  "The 3-letter ISO 4217 currency code."

    ItemPrice:
      type: "object"
      title: "Item Price"
      required: ["@id","@type"]
      properties:
        value:    
          type: "number"
          description:  "The actual price value. 4 decimals places are accepted"
        originalValue:    
          type: "number"
          description:  "The orginal price value. 4 decimals places are accepted"  
        currency:
          type: "string"
          pattern: "^[A-Z]{3}$"
          description:  "The 3-letter ISO 4217 currency code."
     

    ServiceHours:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the service hours."
        "@type":
          type: "string"
          enum:
          - "SERVICE_HOURS"
        weekHours:
          type: array
          description:  "A list of the day(s) of the week and time periods for which the service is valid."
          items: 
            type: "object"
            allOf:
              - $ref: "#/components/schemas/Hours"
        holidayHours:
          type: array
          description: "Map of holiday dates, each with optional `timePeriods`. If a date does not have a time period specified, the restaurant will be closed for that date."
          items: 
            type: "object"  
            allOf:
              - $ref: "#/components/schemas/HolidayHours"    
    
    Hours:
      type: "object"
      title: "Hours"
      required: ["@id","@type"]
      properties:
        dayOfWeek: 
          type: string
          description: "Day of the week for which these service hours are valid"
          enum:
            - "MONDAY"
            - "TUESDAY"
            - "WEDNESDAY"
            - "THURSDAY"
            - "FRIDAY"
            - "SATURDAY"
            - "SUNDAY"   
        timePeriods:
          type: "object"
          description:  "Time window from which users' orders can be placed."
          allOf:
            - $ref: "#/components/schemas/TimePeriods"
 

    TimePeriods:
      type: "object"
      title: "TimePeriods"
      required: ["@id","@type"]
      properties:
        startTime: 
          type: string
          format: time
          description: "Indicates the specific time of day in ISO format starting from which users' orders can be placed."
        endTime:
          type: string
          format: time
          description: "Indicates the specific time of day in ISO format beyond which users' orders cannot be placed."            


    HolidayHours:
      type: "object"
      title: "Holiday Hours"
      required: ["@id","@type"]
      properties:
        date:
          type: string
          format: date
          description: "date"
        timePeriods:
          type: "object"
          description:  "hours"
          allOf:
            - $ref: "#/components/schemas/TimePeriods"     

    Item:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the item."
        "@type":
          type: "string"
          enum:
          - "ITEM"
        name:
          type: "string"
          description:  "Name"
          maxLength: 500
        description:
          type: "string"
          description:  "Description"
        externalCode:
          type: "string"
          description:  "External Code"
        imageUrl:
          type: "string"
          format: "uri"
          description:  "URL pointing to an image of the item.\n\n Image requirements:
                          \n - Hosted on a secure connection (SSL).
                          \n - File size must be less than 10MB.
                          \n - Image must be in JPEG, PNG or GIF format.
                          \n - Both width and height must be between 320px and 1144px."
        nutritionalInfo:
          type: "object"
          description:  "Nutrition information for the dish."
          allOf:
            - $ref: "#/components/schemas/NutritionalInfo"
        serving:
          type: "integer"
          description:  "Number of servings available for the item."   
        unit:
          type: "string"
          description:  "Unit"
        ean:
          type: "string"
          description:  "EAN"
                 

    NutritionalInfo:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        description:
          type: "string"
          format: "UUID"
          description:  "Nutrition information in free text. For example \"Contains preservatives\"."
        calories:
          type: "string"
          description:  "The number of calories in Cal, kcal, or kJ, using the following format: value Cal or min-max Cal"
          pattern: "^[0-9]+(\\.[0-9]+)? ?(- ?[0-9]+(\\.[0-9]+)?)? [a-zA-Z]+$"
        allergen:
          type: "array"
          description:  "Allergens of this Item"
          items:
              type: "string"
              enum: 
              - "ALMONDS"
              - "ALPHA_ISOMETHYL_IONONE"
              - "ALCOHOL"
              - "AMYL_CINNAMAL"
              - "ANISE_ALCOHOL"
              - "BARLEY"
              - "BENZYL_ALCOHOL"
              - "BENZYL_BENZOATE"
              - "BENZYL_CINNAMATE"
              - "BENZYL_SALICYLATE"
              - "BRAZIL_NUTS"
              - "BUTYLPHENYL_METHYLPROPIONATE"
              - "CARROTS"
              - "CASHEW_NUTS"
              - "CELERY"
              - "CEREALS_CONTAINING_GLUTEN"
              - "CINNAMAL"
              - "CINNAMYL_ALCOHOL"
              - "CITRAL"
              - "CITRONELLOL"
              - "COCOA"
              - "CORIANDER"
              - "CORN"
              - "COUMARIN"
              - "CRUSTACEANS"
              - "EGGS"
              - "EUGENOL"
              - "EVERNIA_FURFURACEA"
              - "EVERNIA_PRUNASTRI"
              - "FARNESOL"
              - "FISH"
              - "GERANIOL"
              - "GLUTEN"
              - "HAZELNUTS"
              - "HEXYL_CINNAMAL"
              - "HYDROXYCITRONELLAL"
              - "KAMUT"
              - "LACTOSE"
              - "LUPINE"
              - "MACADAMIA_NUTS"
              - "METHYL_2_OCTYNOATE"
              - "MILK"
              - "MOLLUSCS"
              - "MUSTARD"
              - "NO_DECLARED_ALLERGENS"
              - "OAT"
              - "PEANUTS"
              - "PEAS"
              - "PECAN_NUTS"
              - "PISTACHIOS"
              - "POD_FRUITS"
              - "QUEENSLAND_NUTS"
              - "RYE"
              - "SESAME_SEEDS"
              - "SOYBEANS"
              - "SPELT"
              - "SULPHUR_DIOXIDE"
              - "TREE_NUTS"
              - "TREE_NUT_TRACES"
              - "WALNUTS"
              - "WHEAT"
        additives:
          type: "array"
          description:  "Additives of this Item"
          items:
            type: "string"

        suitableDiet:
          type: "array"
          description:  "The dish complies with the described dietary restriction"
          items:
            type: "string"
            enum:
              - "DIABETIC"
              - "GLUTEN_FREE"
              - "HALAL"
              - "HINDU"
              - "KOSHER"
              - "LOW_CALORIE"
              - "LOW_FAT"
              - "LOW_LACTOSE"
              - "LOW_SALT"
              - "VEGAN"
              - "VEGETARIAN"
        isAlcoholic:
          type: "string"
          description:  "Indicates if an item is alcoholic"           
      
    Menu:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the menu."
        "@type":
          type: "string"
          enum:
          - "MENU"
        name:
          type: "string"
          description:  "Name"
          maxLength: 500
        description:
          type: "string"
          description:  "Description"
        externalCode:
          type: "string"
          description:  "External Code"          
        disclaimer:
          type: "string"
          description:  "Disclaimer"    
        disclaimerURL:
          type: "string"
          format: "uri"
          description:  "Disclaimer URL"
        categoryId:
          type: "array"
          description:  "A list of the @id values of the child `Category` entities that correspond to this `Menu` entity. Default assumes all `Category` entities are available in this menu."
          items:
            type: "string"
            format: "UUID"


    Category:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the category."
        "@type":
          type: "string"
          enum:
          - "CATEGORY"
        index:
          type: "string"
          description:  "Merchant"
        name:
          type: "string"
          description:  "Merchant"
          maxLength: 500
        description:
          type: "string"
          description:  "Merchant"
        imageUrl:
          type: "string"
          description:  "Merchant"
        externalCode:
          type: "string"
          description:  "Merchant"
        status:
          type: "string"
          description:  "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."    
          enum:
            - AVAILABLE
            - UNAVAILABLE
        availabilityId:
          type: "array"
          description:  "The @id values of `Availability` entities which provide details on when the category is available. Default assumes a `Category` is available at all times."
          items:
            type: string
            format: "UUID"  
        itemOfferId:
          type: array
          description:  "A list of the @id values of the child `ItemOffer` entities that correspond to this `Category` entity. Default assumes all `ItemOffer` entities are available in this category."
          items:
            anyOf:
            - $ref: "#/components/schemas/ItemOffer/properties/@id"           
                  
    ItemOffer:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the item offer."
        "@type":
          type: "string"
          enum:
          - "ITEM_OFFER"
        itemId:
          type: "string"
          description:  "The @id value of the `Item` entity correlated to this `ItemOffer` entity."
        index:
          type: "string"
          description:  "Index"  
        price:
          type: "object"
          description:  "Price of the menu item offer. Original and actual values can be informed, for showing discounts."
          allOf:
            - $ref: "#/components/schemas/ItemPrice"
        availabilityIds:
          type: "array"
          description:  "The @id values of `Availability` entities which provide details on when the menu item offer is available. Default assumes an `ItemOffer` is available at all times."
          items:
            type: string
            format: "UUID"   
        optionGroupsIds:
          type: "array"
          description:  "A list of the @id values of the child `OptionGroup` entities that correspond to this `ItemOffer` entity."
          items:
            allOf:
            - $ref: "#/components/schemas/OptionGroup/properties/@id"                      
       
    OptionGroup:
      type: "object"
      title: "Option Group"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the option group."
        "@type":
          type: "string"
          enum:
          - "OPTION_GROUP"
        index:
          type: "string"
          description:  "Index"              
        name:
          type: "string"
          description:  "Name"
          maxLength: 500
        description:
          type: "string"
          description:  "Description"
        externalCode:
          type: "string"
          description:  "External Code"
        status:
          type: "string"
          description:  "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."    
          enum:
            - AVAILABLE
            - UNAVAILABLE
        minPermitted:
          type: "string"
          description:  "The minimum number of options which should be selected in the option group."
        maxPermitted:
          type: "string"
          description:  "The maximum number of options which should be selected in the option group."
        options:
          type: array
          description: "A list of `Option` entities that correspond to this option group"
          items: 
            type: "object"
            description:  "options"
            allOf:
              - $ref: "#/components/schemas/Option"      

    Option:
      type: "object"
      title: "Contact Phones"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the option."
        "@type":
          type: "string"
          enum:
          - "OPTION"
        itemId:
          type: "string"
          description:  "The @id value of the `Item` entity correlated to this `Option` entity."
        index:
          type: "string"
          description:  "index"  
        price:
          type: "object"
          description:  "Price of the menu item offer. Original and actual values can be informed, for showing discounts."
          allOf:
            - $ref: "#/components/schemas/ItemPrice"
        maxPermitted:
          type: "string"
          description:  "The maximum quantity of this option which can be selected in the option group."      
          
    Availability:
      type: "object"
      title: "Availability"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the availability."
        "@type":
          type: "string"
          enum:
          - "AVAILABILITY"       
        startDate:
          type: "string"
          description:  "Start Date"
        endDate:
          type: "string"
          description:  "End Date"
        hours:
            type: "object"
            description:  "Hours"
            allOf:
              - $ref: "#/components/schemas/Hours"   

    Order:
      type: "object"
      title: "Order"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the order."
        "@type":
            type: "string"
            enum:
              - "DELIVERY"
              - "TAKEOUT"
        displayId:
          type: "string"
          description: "Customer ID order shown on the screen."
        createdAt:
          type: "string"
          format: date-time
          description: "Order creation date in ISO timestamp format." 
        orderTiming:
            type: "string"
            enum:
              - "INSTANT"
              - "SCHEDULED"
        preparationStartDateTime:
            type: "string"
            description: "Order preparation start time."
        merchant:
            type: "object"
            properties:
              "@id":
                allOf:
                  - $ref: "#/components/schemas/Merchant/properties/@id"
              name:
                allOf:
                  - $ref: "#/components/schemas/Merchant/properties/name"
        items:
          type: "array"
          items:
            type: "object"
            required: ["@id"]
            properties:
              "@id":
                type: "string"
                format: "UUID"
              index:
                type: "number"
              name:
                type: "string"
              externalCode:
                type: "string"
              unit:
                type: "string"
                enum:
                  - "UNIT"
              ean:
                type: "string"
              quantity:
                type: "number"
              specialInstructions:
                type: "string"
              unitPrice:
                type: "object"
                allOf:
                  - $ref: "#/components/schemas/Price"
              optionsPrice:
                type: "object"
                allOf:
                  - $ref: "#/components/schemas/Price"
              totalPrice:
                type: "object"
                allOf:
                  - $ref: "#/components/schemas/Price"
              options:
                type: "array"
                items:
                  type: "object"
                  required: ["@id"]
                  properties:
                    index:
                      type: "number"
                    "@id":
                      type: "string"
                      format: "UUID"
                    name:
                      type: "string"
                    externalCode:
                      type: "string"
                    unit:
                      type: "string"
                    ean:
                      type: "string"
                      description: ""
                    quantity:
                      type: "number"
                    unitPrice:
                      type: "object"
                      allOf:
                        - $ref: "#/components/schemas/Price"
                    price:
                      type: "object"
                      allOf:
                        - $ref: "#/components/schemas/Price"
                    specialInstructions:
                      type: "string"
        otherFees:
          type: "array"
          items:
            type: "object"
            properties:
              name:
                type: "string"
              type:
                type: "string"
                enum:
                  - "DELIVERY_FEE"
                  - "SERVICE_FEE"
                  - "TIP"
              receivedBy:
                type: "string"
                enum:
                  - "MARKETPLACE"
                  - "MERCHANT"
              receiverDocument:
                type: "string"
                description: "Mandatory for marketplace."
              price:
                type: "object"
                allOf:
                  - $ref: "#/components/schemas/Price"
              observation:
                type: "string"
        discounts:
          type: "array"
          items:
            type: "object"
            properties:
              value:
                type: "number"
              target:
                type: "string"
                enum:
                  - "CART"
                  - "DELIVERY_FEE"
                  - "ITEM"
              targetId:
                type: "string"
                description: "Only mandatory if target field is equal `ITEM`."
              sponsorshipValues:
                type: "array"
                items:
                  type: "object"
                  properties:
                    name:
                      type: "string"
                      enum:
                        - "MARKETPLACE"
                        - "MERCHANT"
                    value:
                      type: "number"
                      format: "decimal"
        total:
          type: "object"
          properties:
            items:
              type: "number"
            otherFees:
              type: "number"
            discount:
              type: "number"
            orderAmount:
              type: "number"
        payments:
          type: "object"
          properties:
            prepaid:
              type: "number"
            pending:
              type: "number"
            methods:
              type: "array"
              items:
                type: "object"
                properties:
                  value:
                    type: "number"
                  currency:
                    allOf:
                      - $ref: "#/components/schemas/Price/properties/currency"
                  type:
                    type: "string"
                    enum:
                      - "ONLINE"
                      - "OFFLINE"
                  method:
                    type: "string"
                    enum:
                      - "CREDIT"
                      - "DEBIT"
                      - "MEAL_VOUCHER"
                      - "FOOD_VOUCHER"
                      - "WALLET"
                      - "PIX"
                      - "CASH"
                      - "OTHER"
                  methodInfo:
                    type: "string"
                  changeFor:
                    type: "number"
                    format: "decimal"
                    description: "Only mandatory for `CASH` method."
        customer:
          type: "object"
          required: ["@id"]
          properties:
            "@id":
              type: "string"
              format: "UUID"
            phone:
              type: "object"
              properties:
                number:
                  type: "string"
                extension:
                  type: "string"
            documentNumber:
              type: "string"
            name:
              type: "string"
            ordersCountOnMerchant:
              type: "number"
        delivery:
          type: "object"
          properties:
            deliveredBy:
              type: "string"
              enum:
                - "MERCHANT"
                - "MARKETPLACE"
            deliveryAddress:
              type: "object"
              properties:
                country:
                  type: "string"
                streetName:
                  type: "string"
                formattedAddress:
                  type: "string"
                streetNumber:
                  type: "string"
                city:
                  type: "string"
                postalCode:
                  type: "string"
                coordinates:
                  type: "object"
                  properties:
                    latitude:
                      type: "number"
                    longitude:
                      type: number
                neighborhood:
                  type: "string"
                state:
                  type: "string"
                complement:
                  type: "string"
            deliveryDateTime:
              type: "string"
              format: date-time
              description: "Delivery date in ISO timestamp format." 
        takeout:
          type: "object"
          properties:
            mode:
              type: "string"
              enum:
                - "DEFAULT"
                - "PICKUP_AREA"
            takeoutDateTime:
              type: "string"
              format: date-time
              description: "Takeout date in ISO timestamp format."
        extraInfo:
          type: "string"
    OrderConfirmed:
      type: "object"
      title: "Order Confirmed"
      properties:
        reason:
          type: "string"
        createdAt: 
          type: "string"
          format: date-time
          description: "Order creation date in ISO timestamp format."
        orderExternalCode:
          type: "string"
    RequestCancelled:
      type: "object"
      title: "Request Cancelled"
      properties:
        reason:
          type: "string"
        code:
          type: "string"
          enum:
            - "ITEM_AVAILABILITY"
        mode:
          type: "string"
          enum:
            - "AUTO"
            - "MANUAL"
        out_of_stock_items:
          type: "array"
          items:
            type: string
        invalid_items:
          type: "array"
          items:
            type: string
    RequestDenied:
      type: "object"
      title: "Request Cancelled"
      properties:
        reason:
          type: "string"
        code:
          type: "string"
          enum:
            - "DISH_ALREADY_DONE"
    SalesByMerchant:
          type: "array"
          required: ["@id"]
          items:
            type: "object"
            properties:
              "@id":
                type: "string"
                format: "UUID"
              orderDate:
                type: "string"
                format: "date-time"
              lastProcessingDate:
                type: "string"
                format: "date-time"
              orderStatus:
                type: "string"
                enum:
                  - "CONCLUDED"
              companyName:
                type: "string"
              documentNumber:
                type: "string"
              businessModelOrder:
                type: "string"
                enum:
                  - "MARKETPLACE"
              payment:
                type: "object"
                properties:
                  type:
                    type: "string"
                    enum:
                      - "ONLINE"
                  method:
                    type: "string"
                    enum:
                      - "CREDIT"
                      - "CASH"
                  brand:
                    type: "string"
                  liability:
                    type: "string"
                    enum:
                      - "MERCHANT"
                  cardNumber:
                    type: "string"
                  billing:
                    type: "object"
                    properties:
                      gmv:
                        type: "number"
                      totalBag:
                        type: "number"
                      deliveryFee:
                        type: "number"
                      benefitMarkeplace:
                        type: "number"
                      benefitMerchant:
                        type: "number"
                      commission:
                        type: "number"
                      acquirerFee:
                        type: "number"
                      deliveryCommission:
                        type: "number"
                      commissionRate:
                        type: "number"
                        format: "double"
                      acquirerFeeRate:
                        type: "number"
                        format: "double"
                      anticipationFee:
                        type: "number"
                      anticipationFeeRate:
                        type: "number"
                        format: "double"
                      totalDebit:
                        type: "number"
                      totalCredit:
                        type: "number"
                  transfer:
                    type: "object"
                    properties:
                      expectedTransferDate:
                        type: "string"
                        format: "date-time"
                      expectedBankAccount:
                        type: "object"
                        properties:
                          bankNumber:
                            type: "string"
                          bankName:
                            type: "string"
                          branchCode:
                            type: "string"
                          branchCodeDigit:
                            type: "string"
                          accountNumber:
                            type: "string"
                          accountNumberDigit:
                            type: "string"

    Event:
      type: "object"
      title: "Event"
      required: ["@id","@type"]
      discriminator:
        propertyName: eventType
        mapping:
          CREATED: '#/components/schemas/EventMetadata'
          CONFIRMED: '#/components/schemas/EventMetadataConfirm'
          DISPATCHED: '#/components/schemas/EventMetadata'
          READY_FOR_PICKUP: '#/components/schemas/EventMetadata'
          PICKUP_AREA_ASSIGNED: '#/components/schemas/EventMetadata'
          CONCLUDED: '#/components/schemas/EventMetadata'
          CANCELLATION_REQUESTED: '#/components/schemas/EventMetadataCancel'
          CANCELLATION_REQUEST_DENIED: '#/components/schemas/EventMetadataCancel'
          CANCELLED: '#/components/schemas/EventMetadataCancel'
      properties:
        eventId:
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the event."  
        eventType:
            type: "string"
            description: "The event type"
            enum:
              - "CREATED"
              - "CONFIRMED"
              - "DISPATCHED"
              - "READY_FOR_PICKUP"
              - "PICKUP_AREA_ASSIGNED"
              - "CONCLUDED"
              - "CANCELLATION_REQUESTED"
              - "CANCELLATION_REQUEST_DENIED"
              - "CANCELLED"
        orderId:
          allOf:
            - $ref: "#/components/schemas/Order/properties/@id"
        orderUrl:
          type: "string"
          format: "uri"
          description: "The URL to get the order details"
        createdAt:
          type: "string"
          format: date-time
          description:  "Order creation date in ISO timestamp format." 

    EventMetadataCancel:
      description: Metadata
      allOf:
        - $ref: '#/components/schemas/Event'
        - type: object
        - properties:
            metadata: 
              type: object
              description: "Information related to the Event Type"
              properties:
                reason:
                  type: "string"
                  description: "Reason for the cancellation"
                code:
                  type: "string"
                  description: "Cancelation reason code"
                  enum:
                    - "PROBLEMAS_DE_SISTEMA"
                    - "PEDIDO_EM_DUPLICIDADE"
                    - "ITEM_INDISPONIVEL"
                    - "RESTAURANTE_SEM_MOTOBOY"
                    - "CARDÁPIO_DESATUALIZADO"
                    - "PEDIDO_FORA_DA_AREA_DE_ENTREGA"
                    - "CLIENTE_GOLPISTA_TROTE"
                    - "FORA_DO_HORÁRIO_DELIVERY"
                    - "DIFICULDADES_INTERNAS_RESTAURANTE"
                    - "AREA_DE_RISCO"
                clientId:
                  type: "string"
                  description: "The URL to get the order details"
     
    EventMetadata:
      description: Metadata
      allOf:
        - $ref: '#/components/schemas/Event'

    EventMetadataConfirm:
      description: Metadata
      allOf:
        - $ref: '#/components/schemas/Event'
        - type: object
        - properties:
            metadata: 
              type: object
              description: "Information related to the Event Type"
              properties:
                expectedPreparationStartTime:
                  type: "string"
                  format: "date-time"
                  description: "Expected preparation start time after Order Confirmation"
                clientId:
                  type: "string"
                  description: "The URL to get the order details"  

    Repository:
      type: "object"
      title: "Repository"
      required: ["@id","@type"]
      properties:
        document:
          type: "string"
          description:  "Document"
          pattern: "/^\\d{14}$/"
        corporateName:
          type: "string"
          description:  "Corporate Name"
          maxLength: 500
        postalCode:
          type: "string"
          description:  "Postal Code" 
        email:
          type: "string"
          description:  "Contact Email. It is recommended that a contact be made available to deal with specific Open Delivery issues."
        website:    
          type: "string"
          format: "URL"
          description:  "Company Website. It is recommended to have a website (or landing page) with information about how the company works with Open Delivery."
        baseApiUrl:
          type: "string"
          format: "URL"
          description:  "Base URL of the endpoints with the company's data. It will be used by the indexing system to search the establishments under the responsibility of the menu software (see endpoint) and to search public menus (see endpoint)."
        hostCompanyDocument:    
          type: "string"
          description:  "Document"
          pattern: "/^\\d{14}$/"
        TTL:
          type: "integer"
          description:  "Time to Live (in seconds). 
          \nA new request must be done when the TTL expires."

    Generico:
      type: "object"
      title: "Order"
      required: ["@id","@type"]
      properties:
        "@id":
          type: "string"
          format: "UUID"
          description:  "A unique identifier of the order."                    
                   
  examples:
    cobBody1:
      summary: "Exemplo de criação de cobrança com vencimento 1"
      value:
        calendario:
          dataDeVencimento: "2020-12-31"
          validadeAposVencimento: 30
        loc:
          id: 789
        devedor:
          logradouro: "Alameda Souza, Numero 80, Bairro Braz"
          cidade: "Recife"
          uf: "PE"
          cep: "70011750"
          cpf: "12345678909"
          nome: "Francisco da Silva"
        valor:
          original: "123.45"
          multa:
            modalidade: "2"
            valorPerc: "15.00"
          juros:
            modalidade: "2"
            valorPerc: "2.00"
          desconto:
            modalidade: "1"
            descontoDataFixa:
              - data: "2020-11-30"
                valorPerc: "30.00"
        chave: "5f84a4c5-c5cb-4599-9f13-7eb4d419dacc"
        solicitacaoPagador: "Cobrança dos serviços prestados."
    cobBody2:
      summary: "Exemplo de criação de cobrança imediata 1"
      value:
        calendario:
          expiracao: 3600
        devedor:
          cnpj: "12345678000195"
          nome: "Empresa de Serviços SA"
        valor:
          original: "37.00"
          modalidadeAlteracao: 1
        chave: "7d9f0335-8dcc-4054-9bf9-0dbd61d36906"
        solicitacaoPagador: "Serviço realizado."
        infoAdicionais:
          - nome: "Campo 1"
            valor: "Informação Adicional1 do PSP-Recebedor"
          - nome: "Campo 2"
            valor: "Informação Adicional2 do PSP-Recebedor"
    cobBody3:
      summary: "Exemplo de revisão de cobrança 1"
      value:
        loc:
          id: 7768
        devedor:
          cpf: "12345678909"
          nome: "Francisco da Silva"
        valor:
          original: "123.45"
        solicitacaoPagador: "Cobrança dos serviços prestados."
    cobBody4:
      summary: "Exemplo de revisão de cobrança 2"
      value:
        valor:
          original: "567.89"
        solicitacaoPagador: "Informar cartão fidelidade"
    cobBody5:
      summary: "Exemplo de revisão de cobrança 3"
      value:
        status: REMOVIDA_PELO_USUARIO_RECEBEDOR
    loteCobVBody1:
      summary: "Exemplo de criação de lote de cobranças com vencimento 1"
      value:
        descricao:  "Cobranças dos alunos do turno vespertino"
        cobsv:
          - calendario:
              dataDeVencimento: "2020-12-31"
              validadeAposVencimento: 30
            txid: "fb2761260e554ad593c7226beb5cb650"
            loc:
              id: 789
            devedor:
              logradouro: "Alameda Souza, Numero 80, Bairro Braz"
              cidade: "Recife"
              uf: "PE"
              cep: "70011750"
              cpf: "08577095428"
              nome: "João Souza"
            valor:
              original: "100.00"
            chave: "7c084cd4-54af-4172-a516-a7d1a12b75cc"
            solicitacaoPagador: "Informar matrícula"
          - calendario:
              dataDeVencimento: "2020-12-31"
              validadeAposVencimento: 30
            txid: "7978c0c97ea847e78e8849634473c1f1"
            loc:
              id: 57221
            devedor:
              logradouro: "Rua 15, Numero 1, Bairro Campo Grande"
              cidade: "Recife"
              uf: "PE"
              cep: "70055751"
              cpf: "15311295449"
              nome: "Manoel Silva"
            valor:
              original: "100.00"
            chave: "7c084cd4-54af-4172-a516-a7d1a12b75cc"
            solicitacaoPagador: "Informar matrícula"
    loteCobVBodyRevisado1:
      summary: "Exemplo de revisão de lote de cobranças com vencimento 1"
      value:
        cobsv:
          - calendario:
              dataDeVencimento: "2020-01-10"
            txid: "fb2761260e554ad593c7226beb5cb650"
            valor:
              original: "110.00"
          - calendario:
              dataDeVencimento: "2020-01-10"
            txid: "7978c0c97ea847e78e8849634473c1f1"
            valor:
              original: "110.00"
    cobResponse1:
      summary: "Exemplo de cobrança imediata 1"
      value:
        calendario:
          criacao: "2020-09-09T20:15:00.358Z"
          expiracao: 3600
        txid: "7978c0c97ea847e78e8849634473c1f1"
        revisao: 0
        loc:
          id: 789
          location: "pix.example.com/qr/9d36b84fc70b478fb95c12729b90ca25"
          tipoCob: "cob"
        location: "pix.example.com/qr/9d36b84fc70b478fb95c12729b90ca25"
        status: "ATIVA"
        devedor:
          cnpj: "12345678000195"
          nome: "Empresa de Serviços SA"
        valor:
          original: "567.89"
          modalidadeAlteracao: 1
        chave: "a1f4102e-a446-4a57-bcce-6fa48899c1d1"
        solicitacaoPagador: "Informar cartão fidelidade"
    cobResponse2:
      summary: "Exemplo de cobrança imediata 2"
      value:
        calendario:
          criacao: "2020-09-09T20:15:00.358Z"
          expiracao: 3600
        txid: "655dfdb1a4514b8fbb58254b958913fb"
        revisao: 1
        loc:
          id: 567
          location: "pix.example.com/qr/1dd7f893a58e417287028dc33e21a403"
        location: "pix.example.com/qr/1dd7f893a58e417287028dc33e21a403"
        status: "CONCLUIDA"
        devedor:
          cnpj: "12345678000195"
          nome: "Empresa de Serviços SA"
        valor:
          original: "100.00"
          modalidadeAlteracao: 0
        chave: "40a0932d-1918-4eee-845d-35a2da1690dc"
        solicitacaoPagador: "Informar cartão fidelidade"
        pix:
        - endToEndId: "E12345678202009091221kkkkkkkkkkk"
          txid: "655dfdb1a4514b8fbb58254b958913fb"
          valor: "110.00"
          horario: "2020-09-09T20:15:00.358Z"
          infoPagador: "0123456789"
          devolucoes:
          - id: "123ABC"
            rtrId: "Dxxxxxxxx202009091221kkkkkkkkkkk"
            valor: "10.00"
            horario:
              solicitacao: "2020-09-09T20:15:00.358Z"
            status: "EM_PROCESSAMENTO"
    cobResponse3:
      summary: "Exemplo de cobrança revisada 1"
      value:
        calendario:
          criacao: "2020-09-09T20:15:00.358Z"
          expiracao: 3600
        txid: "7978c0c97ea847e78e8849634473c1f1"
        revisao: 1
        loc:
          id: 789
          location: "pix.example.com/qr/b1/9d36b84fc70b478fb95c12729b90ca25"
          tipoCob: "cob"
        location: "pix.example.com/qr/v1/9d36b84fc70b478fb95c12729b90ca25"
        status: "ATIVA"
        devedor:
          cnpj: "12345678000195"
          nome: "Empresa de Serviços SA"
        valor:
          original: "567.89"
          modalidadeAlteracao: 0
        chave: "a1f4102e-a446-4a57-bcce-6fa48899c1d1"
        solicitacaoPagador: "Informar cartão fidelidade"
    cobResponse4:
      summary: "Exemplo de cobrança com vencimento 1"
      value:
        calendario:
          criacao: "2020-09-09T20:15:00.358Z"
          dataDeVencimento: "2020-12-31"
          validadeAposVencimento: 30
        txid: "7978c0c97ea847e78e8849634473c1f1"
        revisao: 0
        loc:
          id: 789
          location: "pix.example.com/qr/c2/cobv/9d36b84fc70b478fb95c12729b90ca25"
          tipoCob: "cobv"
        status: "ATIVA"
        devedor:
          logradouro: "Rua 15, Numero 1, Bairro Luz"
          cidade: "Belo Horizonte"
          uf: "MG"
          cep: "99000750"
          cnpj: "12345678000195"
          nome: "Empresa de Serviços SA"
        recebedor:
          logradouro: "Rua 15 Numero 1200, Bairro São Luiz"
          cidade: "São Paulo"
          uf: "SP"
          cep: "70800100"
          cnpj: "56989000019533"
          nome: "Empresa de Logística SA"
        valor:
          original: "567.89"
        chave: "a1f4102e-a446-4a57-bcce-6fa48899c1d1"
        solicitacaoPagador: "Informar cartão fidelidade"
    loteCobVResponse1:
      summary: "Exemplo de lote de cobranças com vencimento 1"
      value:
        descricao:  "Cobranças dos alunos do turno vespertino"
        criacao: "2020-11-01T20:15:00.358Z"
        cobsv:
          - criacao: "2020-11-01T20:15:00.358Z"
            txid: "fb2761260e554ad593c7226beb5cb650"
            status: "CRIADA"
          - txid: "7978c0c97ea847e78e8849634473c1f1"
            status: "NEGADA"
            problema:
              type: https://pix.bcb.gov.br/api/v2/error/CobVOperacaoInvalida
              title: "Cobrança inválida."
              status: 400
              detail: "A requisição que busca alterar ou criar uma cobrança com vencimento não respeita o schema ou está semanticamente errada."
              violacoes:
              - razao: "O objeto cobv.devedor não respeita o schema."
                propriedade: "cobv.devedor"
    loteCobVResponse2:
      summary: "Exemplo de lote de cobranças com vencimento 2"
      value:
        descricao:  "Cobranças dos assinantes anuais"
        criacao: "2020-11-17T20:00:00.358Z"
        cobsv:
          - criacao: "2020-11-17T20:00:00.358Z"
            txid: "06601eaa3822423fbe897f613b983e01"
            status: "CRIADA"
          - criacao: "2020-11-17T20:00:00.358Z"
            txid: "4e07059760d54cf493de6e7f1fbfad9a"
            status: "CRIADA"
    payloadLocationBody1:
      summary: "Exemplo de Payload Location 1"
      value:
        tipoCob: "cob"
    payloadLocationBody2:
      summary: "Exemplo de Payload Location 2"
      value:
        tipoCob: "cobv"
    payloadLocationResponse1:
      summary: "Exemplo de Payload Location 1"
      value:
        id: 7716
        txid: "fda9460fe04e4f129b72863ae57ee22f"
        location: "pix.example.com/qr/v2/cobv/2353c790eefb11eaadc10242ac120002"
        tipoCob: "cobv"
        criacao: "2020-03-11T21:19:51.013Z"
    payloadLocationResponse2:
      summary: "Exemplo de Payload Location 2"
      value:
        id: 856
        txid: "31e08604f9ce459bb59672332af8d672"
        location: "pix.example.com/qr/v2/cobv/39c9f435c6324867aa1dec1260e1127c"
        tipoCob: "cobv"
        criacao: "2020-02-10T19:22:52.013Z"
    payloadLocationResponse3:
      summary: "Exemplo de Payload Location 3"
      value:
        id: 2316
        txid: "eb9d87f36fca4c92b7d5ec48e2ee3853"
        location: "pix.example.com/qr/v2/a8534e273ecb47d3ac30613104544466"
        tipoCob: "cob"
        criacao: "2020-05-31T19:39:54.013Z"
    payloadLocationResponse4:
      summary: "Exemplo de Payload Location 3"
      value:
        id: 2316
        location: "pix.example.com/qr/v2/a8534e273ecb47d3ac30613104544466"
        tipoCob: "cob"
        criacao: "2020-05-31T19:39:54.013Z"
    payloadLocationResponse5:
      summary: "Exemplo de Payload Location 1"
      value:
        id: 7716
        location: "pix.example.com/qr/v2/2353c790eefb11eaadc10242ac120002"
        tipoCob: "cob"
        criacao: "2020-03-11T21:19:51.013Z"
    payloadLocationResponse6:
      summary: "Exemplo de Payload Location 2"
      value:
        id: 856
        location: "pix.example.com/qr/v2/cobv/39c9f435c6324867aa1dec1260e1127c"
        tipoCob: "cobv"
        criacao: "2020-02-10T19:22:52.013Z"
    pixResponse1:
      summary: "Exemplo de Pix 1"
      value:
        endToEndId: "E12345678202009091221abcdef12345"
        txid: "cd1fe328c875481285a6f233ae41b662"
        valor: "100.00"
        horario: "2020-09-10T13:03:33.902Z"
        infoPagador: "Reforma da casa"
        devolucoes:
        - id: "000AAA111"
          rtrId: "D12345678202009091000abcde123456"
          valor: "11.00"
          horario:
            solicitacao: "2020-09-10T13:03:33.902Z"
          status: EM_PROCESSAMENTO
    pixResponse2:
      summary: "Exemplo de Pix 2"
      value:
        endToEndId: "E12345678202009091221ghijk78901234"
        txid: "5b933948f3224266b1050ac54319e775"
        valor: "200.00"
        horario: "2020-09-10T13:03:33.902Z"
        infoPagador: "Revisão do carro"
    webhookBody1:
      summary: "Exemplo de configuração de Webhook 1"
      value:
        webhookUrl: "https://pix.example.com/api/webhook/"
    webhookResponse1:
      summary: "Exemplo de consulta de Webhook 1"
      value:
        webhookUrl: "https://pix.example.com/api/webhook/"
        chave: "40a0932d-1918-4eee-845d-35a2da1690dc"
        criacao: "2020-11-11T10:15:00.358Z"
    pixWebhook1:
      summary: "Exemplo de Webhook Pix 1"
      value:
        endToEndId: "E12345678202009091221kkkkkkkkkkk"
        txid: "c3e0e7a4e7f1469a9f782d3d4999343c"
        valor: "110.00"
        horario: "2020-09-09T20:15:00.358Z"
        infoPagador: "0123456789"
        devolucoes:
          id: "123ABC"
          rtrId: "D12345678202009091221abcdf098765"
          valor: "10.00"
          horario:
            solicitacao: "2020-09-09T20:15:00.358Z"
          status: "EM_PROCESSAMENTO"
    pixWebhook2:
      summary: "Exemplo de Webhook Pix 2"
      value:
        endToEndId: "E87654321202009091221dfghi123456"
        txid: "971122d8f37211eaadc10242ac120002"
        valor: "110.00"
        horario: "2020-09-09T20:15:00.358Z"
        infoPagador: "0123456789"
    devolucaoResponse1:
      summary: "Exemplo de devolução 1"
      value:
        id: "123456"
        rtrId: D12345678202009091000abcde123456
        valor: "7.89"
        horario:
          solicitacao: "2020-09-11T15:25:59.411Z"
        status: EM_PROCESSAMENTO
    devolucaoResponse2:
      summary: "Exemplo de devolução 2"
      value:
        id: "502"
        rtrId: D12345678202011111000fghij789012
        valor: "20.00"
        horario:
          solicitacao: "2020-09-11T15:25:59.411Z"
        status: NAO_REALIZADO
        motivo: "Negado por timeout"
    devolucaoSolicitada1:
      summary: "Exemplo de solicitação de devolução 1"
      value:
        valor: "7.89"
    cobPayload1:
      summary: "Exemplo de payload de cobrança imediata 1"
      value:
        calendario:
          criacao: "2020-09-15T19:39:54.013Z"
          apresentacao: "2020-04-01T18:00:00Z"
          expiracao: 3600
        txid: "fc9a4366ff3d4964b5dbc6c91a8722d3"
        revisao: 3
        status: "ATIVA"
        valor:
          original: "500.00"
          modalidadeAlteracao: 0
        chave: "7407c9c8-f78b-11ea-adc1-0242ac120002"
        solicitacaoPagador: "Informar cartao fidelidade"
        infoAdicionais:
        - nome: "quantidade"
          valor: "2"      
    cobPayload2:
      summary: "Exemplo de payload de cobrança com vencimento 1"
      value:
        calendario:
          criacao: "2020-09-15T19:39:54.013Z"
          apresentacao: "2020-04-01T18:00:00Z"
          dataDeVencimento: "2020-12-31"
          validadeAposVencimento: 30
        devedor:
          cnpj: "56989000019533"
          nome: "Empresa de Alimentos SA"
        recebedor:
          logradouro: "Rua 20 Numero 70, Bairro Luz"
          cidade: "Belo Horizonte"
          uf: "MG"
          cep: "55120750"
          cnpj: "58900633120711"
          nome: "Empresa de Abastecimento SA"
        txid: "fc9a4366ff3d4964b5dbc6c91a8722d3"
        revisao: 3
        status: "ATIVA"
        valor:
          original: "123.45"
          multa: "15.00"
          juros: "2.00"
          final: "140.45"
        chave: "7407c9c8-f78b-11ea-adc1-0242ac120002"
        solicitacaoPagador: "Informar cartao fidelidade"
        infoAdicionais:
        - nome: "quantidade"
          valor: "2"      
    getCobs1:
      summary: "Hambuguer example"
      value:
        parametros:
          inicio: "2020-04-01T00:00:00Z"
          fim: "2020-04-02T10:00:00Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 2
        cobs:
          - allOf:
            - $ref: "#/components/examples/cobResponse1/value"
          - allOf:
            - $ref: "#/components/examples/cobResponse2/value"
    getCobs2:
      summary: "Pizza Example"
      value:
        parametros:
          inicio: "2020-04-01T00:00:00Z"
          fim: "2020-04-01T23:59:59Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 1
        cobs:
          - allOf:
            - $ref: "#/components/examples/cobResponse1/value"
    getCobsV1:
      summary: "Exemplo de retorno da consulta de cobranças com vencimento 1"
      value:
        parametros:
          inicio: "2020-04-01T00:00:00Z"
          fim: "2020-04-01T23:59:59Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 1
        cobs:
          - allOf:
            - $ref: "#/components/examples/cobResponse4/value"
    getPix1:
      summary: "Exemplo de retorno da consulta de Pix 1"
      value:
        parametros:
          inicio: "2020-04-01T00:00:00Z"
          fim: "2020-04-01T23:59:59Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 2
        pix:
          - allOf:
            - $ref: "#/components/examples/pixResponse1/value"
          - allOf:
            - $ref: "#/components/examples/pixResponse2/value"
    getLotesCobsV:
      summary: "Exemplo de retorno da consulta de Pix 1"
      value:
        parametros:
          inicio: "2020-01-01T00:00:00Z"
          fim: "2020-12-01T23:59:59Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 2
        lotes:
          - allOf:
            - $ref: '#/components/examples/loteCobVResponse1/value'
          - allOf:
            - $ref: '#/components/examples/loteCobVResponse2/value'
    getPayloadLocation1:
      summary: "Exemplo de retorno da consulta de locations 1"
      value:
        parametros:
          inicio: "2020-04-01T00:00:00Z"
          fim: "2020-04-01T23:59:59Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 3
        loc:
          - allOf:
            - $ref: '#/components/examples/payloadLocationResponse1/value'
          - allOf:
            - $ref: '#/components/examples/payloadLocationResponse2/value'
          - allOf:
            - $ref: '#/components/examples/payloadLocationResponse3/value'
    getWebhook1:
      summary: "Exemplo de retorno da consulta de Webhooks 1"
      value:
        parametros:
          inicio: "2020-04-01T00:00:00Z"
          fim: "2020-04-01T23:59:59Z"
          paginacao:
            paginaAtual: 0
            itensPorPagina: 100
            quantidadeDePaginas: 1
            quantidadeTotalDeItens: 1
        webhooks:
          - allOf:
            - $ref: '#/components/examples/webhookResponse1/value'
    RequisicaoInvalidaCobExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/CobOperacaoInvalida
        title: "Cobrança inválida."
        status: 400
        detail: "A requisição que busca alterar ou criar uma cobrança para pagamento imediato não respeita o schema ou está semanticamente errada."
        violacoes:
        - razao: "O campo cob.valor.original não respeita o schema."
          propriedade: "cob.valor.original"
    OperacaoInvalidaCobExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/CobOperacaoInvalida
        title: "Operação inválida."
        status: 400
        detail: "A requisição que busca alterar ou criar uma cobrança para pagamento imediato não respeita o schema ou está semanticamente errada."
    RequisicaoInvalidaCobVExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/CobVOperacaoInvalida
        title: "Cobrança inválida."
        status: 400
        detail: "A requisição que busca alterar ou criar uma cobrança com vencimento não respeita o schema ou está semanticamente errada."
        violacoes:
        - razao: "O objeto cobv.devedor não respeita o schema."
          propriedade: "cobv.devedor"
    OperacaoInvalidaCobVExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/CobVOperacaoInvalida
        title: "Operação inválida."
        status: 400
        detail: "Cobrança não encontra-se mais com o status ATIVA, somente cobranças ativas podem ser revisadas."
    RequisicaoInvalidaCobPayloadExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/CobPayloadNaoEncontrado
        title: "Cobrança não encontrada."
        status: 404
        detail: "A cobrança em questão não foi encontrada para a location requisitada."
    RequisicaoInvalidaLoteCobVExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/LoteCobVOperacaoInvalida
        title: "Lote de cobranças inválido."
        status: 400
        detail: "A requisição que busca alterar ou criar um lote de cobranças com vencimento não respeita o schema ou está semanticamente errada."
        violacoes:
        - razao: "O objeto loteCobV.cobsV não respeita o schema."
          propriedade: "loteCobV.cobsV"
        - razao: "O campo loteCobV.descricao não respeita o schema."
          propriedade: "loteCobV.descricao"
    RequisicaoInvalidaDevolucaoExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/PixDevolucaoInvalida
        title: "Devolução inválida."
        status: 400
        detail: "A presente requisição de devolução não respeita o schema ou não faz sentido semanticamente."
    RequisicaoInvalidaWebhookExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/WebhookOperacaoInvalida
        title: "Webhook inválido."
        status: 400
        detail: "A presente requisição busca criar um webhook sem respeitar o schema ou, ainda, com sentido semanticamente inválido."
    RequisicaoInvalidaLocationExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/PayloadLocationOperacaoInvalida
        title: "PayloadLocation inválido."
        status: 400
        detail: "A presente requisição busca criar uma location sem respeitar o schema estabelecido."
    AcessoNegadoExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/AcessoNegado
        title: "Acesso Negado"
        status: 403
        detail: "Requisição de participante autenticado que viola alguma regra de autorização."
    NaoEncontradoExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/NaoEncontrado
        title: "Não Encontrado"
        status: 404
        detail: "Entidade não encontrada."
    ServicoIndisponivelExample1:
      summary: "Exemplo de erro da requisição 1"
      value:
        type: https://pix.bcb.gov.br/api/v2/error/ServicoIndisponivel
        title: "Serviço Indisponível"
        status: 503
        detail: "Serviço não está disponível no momento. Serviço solicitado pode estar em manutenção ou fora da janela de funcionamento."     
  