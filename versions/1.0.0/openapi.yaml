openapi: 3.0.3
info:
  title: Open Delivery API
  version: "1.0.0"
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0
  contact:
    url: https://www.opendelivery.org.br
    x-author: Guilherme Munhoz Camargo - Programmers
  x-logo:
    url: https://gui-camargo.github.io/OD/logo-open-delivery_small.png
    altText: Open Delivery logo

  description: |-
    # ► ------- OPEN DELIVERY ------- ◄

    # └► Introduction
      **Open Delivery** proposes to solve the challenge of organizing the flow of information between merchants and **Ordering Applications**, establishing a single communication standard for all, through a set of REST APIs.
      Thus, menus and orders are standardized and customer requests are received in a single place, in an organized and efficient way, allowing the merchant to work with more partners in the delivery environment.

    # └► Table Of Contents

    The documentation is separated as follows:

    **[General and Common Information](#section/-GENERAL-INFO-)**    
    This is information that is valid for all versions that exist so far.
      - **[How to Start](#section/How-to-Start-(Setup-Guide))**
      - **[Open Delivery API Evolution](#section/Open-Delivery-API-Evolution)**
      - **[General Guidelines](#section/General-Guidelines)**
      - **[Error Handling](#section/Error-Handling)**


    **Entities and Endpoints**   
      - **[Security](#tag/securitySection)**
      - **[Merchant](#tag/merchantSection)**
      - **[Order](#tag/orderSection)**

    # └► Changelog
      
      Latest Changes:  
    >  
    >  ### Version [1.0.0] - Apr 18, 2022
    >
    >  - Initial release.

    # └► Issues and Suggestions

    In case of doubts, suggestions, improvements, problems or any information regarding the documentation presented here, access the project's Github repo and open a new issue.
       
       https://github.com/Abrasel-Nacional/docs/issues

    # 
    # ► ------- GENERAL INFO -------- ◄

    # └► How to Start (Setup Guide)

    The Open Delivery API proposes the implementation of a single communication standard between the various parts that make up the delivery environment. This documentation contains all the definitions needed for interested systems and platforms to implement it.

    Open Delivery does not have a server or baseURL. It is up to each company that implements the standard to use its infrastructure to host the endpoints.

    This section seeks to summarize the Open Delivery documentation as a whole, helping the different parts of the integrations to understand what needs to be developed and parameterized. 

    First, it is recommended to read all the documentation to understand the different processes and flows of the integrations. 

    After reading and understanding the documentation as a whole, companies interested in implementing the standard in their platforms and systems can use this guide to assist in the implementation.

    ## Parties Involved

    - **ORDERING APPLICATION**: It is the platform where the final consumer will choose his items and place the order. It is responsible for reading the merchant data exposed by the SOFTWARE SERVICE and sending the orders to the SOFTWARE SERVICE as well.
              
    - **SOFTWARE SERVICE**: It is the merchant management platform. It is responsible for exposing the merchant data (registration data, service data, and menus) and receiving the orders from the ORDERING APPLICATION.

      > There may also be applications that will perform a hub function, connecting the ORDERING APPLICATION to the SOFTWARE SERVICE. In this context, these intermediate applications, can play the role of both the ORDERING APPLICATION (when communicating with a SOFTWARE SERVICE) as well as the SOFTWARE SERVICE (when communicating with the ORDERING APPLICATION).

    ## Development

    Since Open Delivery is not the host of the APIs, it is up to the companies interested in using the standard to develop the Open Delivery standard APIs in their systems and platforms using this documentation as a guideline. 

    Listed below are the different Routes that each party needs to implement and make available in their systems:

    | |ORDERING APPLICATION|SOFTWARE SERVICE|LOGISTIC SERVICE|
    |-|:------------------:|:--------------:|:--------------:|
    |**[AUTHENTICATION](#tag/authentication)**|||||
    |[POST /oauth/token](#operation/getToken)|X||X|
    |--------------------------------||||
    |**[MERCHANT](#tag/merchantSection)**|||||
    |[GET /merchant](#operation/getMerchant)||X||
    |[POST /merchantUpdate](#operation/menuUpdated)|X||
    |[GET /merchantStatus](#tag/merchantStatus)|X|||
    |--------------------------------||||
    |**[ORDER](#tag/ordersSection)**|||||
    |[GET /events:polling ](#operation/pollingEvents)|X|||
    |[POST /events/acknowledgment](#operation/pollingAcknowledgment)|X|||
    |[POST /orderUpdate](#operation/newEvent)||X||
    |||||
    |[GET /orders/{orderId}](#operation/ordersDetails)|X|||
    |[POST /orders/{orderId}/confirm](#operation/confirmOrder)|X|||
    |[POST /orders/{orderId}/readyForPickup](#operation/orderReady)|X|||
    |[POST /orders/{orderId}/dispatch](#operation/dispatchOrder)|X||
    |||||
    |[POST /orders/{orderId}/requestCancellation](#operation/requestCancellation)|X|||
    |[POST /orders/{orderId}/acceptCancellation](#operation/cancellationAccepted) |X|||
    |[POST /orders/{orderId}/denyCancellation](#operation/cancellationDenied)|X|||
    |--------------------------------||||

     ## Parametrizations

      > **IMPORTANT: Before reading this section, it is recommended the reading of the complete documentation, for a better understanding of the different required parameterizations.**

      Once the endpoints are implemented, the parties interested in integrating via the Open Delivery stantard should provide some parameters for the other party to correctly connect to its routes. 

      Below is a list of information that each party must provide to the other party for the integrations to occur, i.e., you should consider that the information below will be created as parameters on the endpoint that will call the endpoints.

      - **PARAMETERS IN THE SOFTWARE SERVICE   
      (ORDERING APPLICATION --> SOFTWARE SERVICE)**

        - **{baseURL}** : The {baseURL} is the parameter that indicates the base address, i.e. the constant part of the address, where the routes will be called. The **Ordering Application** can provide up to 2 different base URLs:
          - {baseURL} for authentication: where the token route will be hosted.
          - {baseURL} for the other routes.

          The **Ordering Application** can use only one {baseURL} if it wishes.
        
        - **clientId** and **clientSecret**: The **Ordering Application** is responsible for providing the credentials for authentication to be performed through the authentication endpoint. 
        
            > IMPORTANT: As described in the authentication section of the documentation, credentials must be generated BY MERCHANT and not by **Software Service**, that is, even if several MERCHANTS use the same **Software Service**, each of the MERCHANT will have a unique clientId and clientSecret.

        - **AppId**: It is the unique ID of the **Ordering Application**. It must be generated by the **Ordering Application** itself, and once generated, it must be informed to all the **Software Service**S that it will integrate. Since the **AppId** is a unique key of the **Ordering Application**, you must not create oneAppId** per **Software Service**S, but the same key for all of them.
      > The companies that play the role of hub, intermediating the integrations between the **Ordering Application** and the **Software Service**, must also generate their own **AppId**, different from the **Ordering Application**'s AppId.

      - **PARAMETERS IN ORDERING APPLICATION  
      (SOFTWARE SERVICE --> ORDERING APPLICATION)**

        - **{baseURL} from the `GET /merchant` endpoint:** The **Ordering Application** must be provided with the {baseURL} to access the GET /merchant route to obtain the merchant's information. 

          > IMPORTANT: Each merchant that the **Software Service** works with must have a unique {baseURL}.
        - **apiKey**: If the GET /merchant endpoint is implemented using authentication, it is necessary that the **Software Service** provides the apiKey referring to the entered merchant.
        
        - **Order Event Webhook**: If both parties are going to work with sending order events via webhook, it is necessary to provide the URL of the webhook.   
      Default webhook route: 
      `POST {baseURL}/orderEvent`

    # └► Open Delivery API Evolution

     The **Open Delivery** API seeks to respect [SemVer](https://semver.org/). In this sense, compatible changes should not generate a new major version.

     The API version is composed of 4 elements: major, minor, patch and release candidate. The version v[x] in the URL path is the major element of the API version. The evolution of the version is as follows:

     - **Major**: incompatible, contract-breaking changes (v1.0.0 → v2.0.0)
     - **Minor**: compatible, non-breaking changes (v1.1.0 → v1.2.0)
     - **Patch**: bugfixes, clarifications to specifications, no functional changes (v1.1.1 → v1.1.2)
     - **Release candidate**: pre-release versions of any future patch, minor or major (v1.0.0-rc.1 → v1.0.0-rc.22)
     Non-breaking changes and clarifications to specifications may occur at any time. Customers should be prepared to handle these changes without breaking.

     The following changes are expected and considered backward compatible:

     - Addition of new features to the **Open Delivery** API;
     - Addition of new optional parameters;
     - Addition of new fields in **Open Delivery** API responses;
     - Change of fields sorting;
     - Addition of new elements in enumerations.

    # └► General Guidelines

     - **Date-Time, Date and Time values**: For properties that require a Date-Time, Date or Time value, use the formats specified in date-time, date and time formats (following the [RFC3339](https://xml2rfc.tools.ietf.org/public/rfc/html/rfc3339.html#anchor14) specifications)
      
      > **ALL DATES MUST BE SENT USING UTC AS DEFAULT.**   
      > (This way it is simpler for the receiving agent to convert to local time.)

      For example:
      
      **2017-05-01T06:30:00Z** for date-time (As defined by date-time - [RFC3339](https://xml2rfc.tools.ietf.org/public/rfc/html/rfc3339.html#anchor14))\
      **2017-05-01** for date (As defined by full-date - [RFC3339](https://xml2rfc.tools.ietf.org/public/rfc/html/rfc3339.html#anchor14))\
      **08:08:00Z** for time (As defined by full-time - [RFC3339](https://xml2rfc.tools.ietf.org/public/rfc/html/rfc3339.html#anchor14))

    - **IDs**: Use an id property to identify all unique entities within an entity type. An id is a unique identifier of the entity of that type, but across entities, IDs can overlap.

    - **Null** values: Do not use the value null in place of objects. If an object is optional, you must omit it from your feed.

    - **{baseURL}** : Since Open Delivery is not the host of the APIs, it is up to the companies interested in using the standard to provide the {baseURL}. Companies can provide up to two {baseURL}:
        - {baseURL} for authentication: where the **[Get Access Token](#operation/getToken)** route will be hosted.
        - {baseURL} for all other routes.

        > It is also possible to use the same {baseURL} for all routes.

    - **Sending arrays as request parameters:**

      To send an array parameter on a request for any endpoint, use the following format:   
      
      - For `QUERY` parameters:
      ```
      ?param=X&param=Y&param=Z
      ```

      - For `HEADER` parameters:
      ```
          param: X
          param: Y
          param: Z
      ```



    # └► Error Handling

     The API returns HTTP status codes to indicate success or failure of requests.

     `2xx` codes indicate success.  
     `4xx` codes indicate failure caused by the information sent by the client or the current state of the entities.  
     `5xx` codes codes indicate service problems on the API side.

     ## General

     This section gathers errors that could be returned by any endpoints listed in the API.

     ### `BadRequest`

       * __Meaning__: Invalid request.
       * __HTTP Status Code__: [400 Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1).

     ### `Forbidden`

       * __Meaning__: Authenticated client request that violates some authorization rule.
       * __HTTP Status Code__: [403 Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3).

     ### `NotFound`

       * __Meaning__: Entity not found.
       * __HTTP Status Code__: [404 Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4).

     ### `Gone`

       * __Meaning__: Indicates that the entity existed, but has been permanently removed.
       * __HTTP Status Code__: [410 Gone](https://tools.ietf.org/html/rfc7231#section-6.5.9).

     ### `InternalServerError`

       * __Meaning__: Unexpected condition when processing requisition.
       * __HTTP Status Code__: [500 Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1).

     ### `ServiceUnavailable`

       * __Meaning__: Service is not currently available. Requested service may be under maintenance or outside the operating window.
       * __HTTP Status Code__: [503 Service Unavailable](https://tools.ietf.org/html/rfc7231#section-6.6.4).

     ### `GatewayTimeout`

       * __Meaning__: Indicates that the service took longer than expected to return.
       * __HTTP Status Code__: [504 Gateway Timeout](https://tools.ietf.org/html/rfc7231#section-6.6.5).


    # 
    # ► -- ENTITIES & ENDPOINTS  --- ◄

tags:

  # Authentication

    - name: securitySection
      x-displayName: "└─■ SECURITY"
      x-traitTag: true

    - name: authentication
      x-displayName: "└───● Authentication"
      description: |

        **Open Delivery** suports two types of authentication methods: **OAuth 2** and **apiKey**.

        <!-- ReDoc-Inject: <security-definitions> -->

  # Version Tags

    - name: versionSection
      x-displayName: " ►►►► VERSION 1.0.0-rc.13 ◄◄◄◄"
      x-traitTag: true
      description: |-
        All the information listed in this section is planned to be released in version **1.0.0** of the Open Delivery API.

        > This version is still in **'Beta'**, so minor changes may still occur until release.

    - name: versionChangelog
      x-displayName: "└─► Changelog"
      x-traitTag: true
      description: |-  
      
          Latest Changes:  
          
          ### Version [1.0.0] - Mar 18, 2022

          - Version release.

          See the full changelog here:  
          https://github.com/Abrasel-Nacional/Open-Delivery-Beta-Test/blob/main/CHANGELOG.md  
  
  # Merchant Tags

    - name: merchantSection
      x-displayName:   "└─■ MERCHANT"
      x-traitTag: true

    - name: merchantOverview
      x-displayName: "└───● Merchant Overview"
      description: |-

        The Merchant entity will be the entity used by the **Ordering Application** to fetch all the data from a merchant and display it to the user.
        It is the responsibility of the merchant **Software Service** to provide the endpoint and the responsibility of the **Ordering Application** to fetch the information.

        ## Merchant API Usage

        The merchant must 'choose' a **Software Service**, which will be responsible for exposing its data on the **[/merchant](#operation/getMerchant)** endpoint. This endpoint will be used by the ordering system to get the updated merchant infos (BasicInfos, Services and Menus).

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/menu_flow.png" />
        </div>

        The **Ordering Application** can check for merchant updates in the following ways:
        1.	Make a new request on the **[/merchant](#operation/getMerchant)** endpoint whenever the TTL expires;

        2.	The **Ordering Application** can optionally provide a **[webhook](#operation/menuUpdated)** , where the merchant **Software Service** can send a merchant update notification;

        3.	If the **Software Service** **[refuses](#operation/cancelDenied)** an order for any reason, upon receiving the refusal, it is recommended that the **Ordering Application** make a new request on the **[/merchant](#operation/getMerchant)** endpoint.

    - name: merchantStructure
      x-displayName: └───● Merchant Structure
      description: |-

        The structure of the Merchant model consists of the following top-level properties:

        - **BasicInfo**: Information about the merchant.
        - **Services entities**: Timing, location, and conditions of the merchant service.
        - **Menu entities**: Details of the merchnat menus.

        The following diagram shows how Basic Info, Service, and Menu properties represent a single merchant:

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/merchant_structure.png" />
        </div>

        The following schema lists the properties for the `Merchant` model:

        <SchemaDefinition schemaRef="#/components/schemas/MerchantDescription" />     

        # BasicInfo

        A merchant `BasicInfo` defines properties such as the merchant name, location address, website, description, telephone number, for a merchant that the merchant **Software Service** serves. 
        Typically, this data is static.

        The following schema lists the properties for the `BasicInfo` type: 

        <SchemaDefinition schemaRef="#/components/schemas/BasicInfo" />

        # Service

        The `Service` defines the capabilities of a delivery organization in a geographic region.
        A `Service` defines properties such as the service type (`DELIVERY` or `TAKEOUT`), hours available, and area served.  
        Each Service must be linked to a `Menu`, through the `menuId` property.   
        `Service` is expected to change.

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/merchant_services.png" />
        </div>

        The following schema lists the properties for the `Service` type: 

        <SchemaDefinition schemaRef="#/components/schemas/Service" />

        # Menu

        A `Menu` is a set of linked properties such as categories, items, offers and availability.  
        In order to be displayed by the **Ordering Application**, a `Menu` needs to be linked to a `Service` through the `menuId` property.

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/merchant_menus.png" />
        </div>

        Data in a `Menu` entity is expected to change.

        The following schema lists the properties for the `Menu` type: 

        <SchemaDefinition schemaRef="#/components/schemas/Menu" />

        ## Category

        A `Category` is the propertie in which the merchant has to organize its `ItemsOffers` in order 
        to make it easier for the user to find what he wants to buy. Categories have statuses and accepts `Availability` entities.

        The following schema lists the properties for the `Category` type: 

        <SchemaDefinition schemaRef="#/components/schemas/Category" />

        ## Item

        A `Item` propertie is the menu entity that carries all the general item information, like:
        name, description, external code, image, nutricional information, and EAN (European Article Number).
        The `Item` can be offered in a `Menu` as a main item or an option. And, for the same store, it can even be reused in different `Menus`.

        The following schema lists the properties for the `Item` type: 

        <SchemaDefinition schemaRef="#/components/schemas/Item" />

        ## ItemOffer

        The `ItemOffer` can be considered the offering of a item, and it is used to set the item price and `Availability`.
        The `ItemOffer` is a `Item` related to the `Category`.

        The following schema lists the properties for the `ItemOffer` type: 

        <SchemaDefinition schemaRef="#/components/schemas/ItemOffer" />

        ## OptionGroup and Option

        The `OptionGroup` is the entity used to group customizations of a product, for example: "Choose your beverage:"
        An `OptionGroup` can be shared by several items.
        The `OptionGroup` has its own statuses, and can be activated or desactivated when needed. 

        `Options` are the complements of a OptionGroup. It can be defined as: "A `Item` related to a `OptionGroup`". 
        It is possible to set the `Option` price to 0.00 regardless of whether it is mandatory or optional.

        The following schema lists the properties for the `OptionGroup` type: 

        <SchemaDefinition schemaRef="#/components/schemas/OptionGroup" />


        ## Availability

        The `Availability` entity defines specific times and days to control the availability of `Categories` and `Item offerings` within the `Menu`.
        It is also possible to set special times for holidays.

        The following schema lists the properties for the `Availability` type: 

        <SchemaDefinition schemaRef="#/components/schemas/Availability" />

    - name: merchantEndpoints
      x-displayName: "└───● Merchant Endpoint"
      description: |-

    - name: merchantStatus
      x-displayName: "└───● Merchant Status"
      description: |-
        ## Health Check

        The **Ordering Application** must provide an **[endpoint](#operation/getMerchantStatus)** to let the merchant **Software Service** knows if its merchant information is being correctly read by the **Ordering Application**.

    - name: merchantUpdate
      x-displayName: "└───● Merchant Update"
      description: |-
        ### Merchant Update Notification

        **[Webhook](#operation/menuUpdated)** is sent to notify the **Ordering Application** that an new update has happened on the merchant information.

        The **Ordering Application** that implements this webhook, should return an HTTP 200 response code with an empty response body to acknowledge receipt of the webhook event. 
        If the merchant **Software Service** does not receive a 200 acknowledgement response, than the webhook event will be resent based on the **Software Service** policies.

  # Orders Tags

    - name: ordersSection
      x-displayName:  "└─■ ORDERS"
      x-traitTag: true

    - name: ordersOverview
      x-displayName: └───● Order Overview
      description: |-

        This overview summarizes the **Open Delivery** Ordering flow and how it interacts with merchant **Software Service** and **Ordering Application**.

        ### Order Events

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/order_life_cicle.png" />
        </div>

        ### Understanding the Order Flow

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/order_integrations2.png" />
        </div>

        The order flow has the following Macro steps:

        ### Order Event Reception

        Through Order Events, the '**Ordering Application**' communicates to the '**Software Service**' the existence of a new order, as well as the other events of the order lifecycle.

        **Open Delivery** provides two ways for merchant **Software Service** to be aware of new events:

        - **[Polling](#tag/ordersPolling)**: 
        Receiving events through polling provided by the '**Ordering Application**' is the standard way **Open Delivery** works, and its implementation is mandatory.

        - **[Webhook](#tag/ordersWebhook)**:
          Optionally it is recommended the implementation of a **webhook** by the merchant **Software Service** for the **Ordering Applications** to send new events directly, ensuring a much faster communication.

          > As this implementation is not mandatory, it is recommended that the merchant **Software Service** contacts the **Ordering Application** to find out if it is possible to work with this possibility.

        ### Order Details

        Once the new order event is received, it is necessary to get the **[order details](#tag/ordersDetails)**, such as items purchased, delivery addresses, and payment methods.

        ### Events Updates

        After getting the order details, the merchant needs to notify the '**Ordering Application**' of the order progress.

        Through the **Open Delivery** API it is possible to:

        - **[Confirm](#operation/confirmOrder)** receipt of order;
        - Notify that an order is **[ready for pickup](#operation/orderReady)**;
        - Notify that an order has been **[dispatched](#operation/dispatchOrder)**.

        Whenever a merchant triggers one of these actions, the '**Ordering Application**' will send a new event to the mechart **Software Service**, acknowledging the new order status within the '**Ordering Application**'.

        > For `TAKEOUT` orders, it is possible to optionally assign a **pickup area** that will be informed through an event to the merchant.
        > This must be provided by the **Ordering Application** interface.

        ### Order Cancellation

        **Open Delivery** provides API's to send **[cancellation](#tag/ordersCancellation)** requests from either system.
        These requests can be accepted or denied depending on the rules that the company has.
      x-traitTag: true

    - name: ordersPolling
      x-displayName: └───● Polling (Required)
      description: |-

        Receiving events via Polling works as follows:

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/polling.png" />
        </div>

        ### Query new order events

        In order to receive new order events, the merchant **Software Service** must make requests on the polling endpoint regularly at a certain time interval, determined by the '**Ordering Application**'. 
        Whenever there is a new event the response will send the response code 200 with the list of events. If there are no new events, the response will send the response code 204.

        > It is important that the **Software Service** performs the requests within the timeframe determined by the **Ordering Application**, as blocking and penalties may occur depending on the application's rules.

        **Availability of new events in polling:** 

        The **Ordering Application** may have specific rules about the maximum time new events are available in polling before they are removed.
            
        > Always check with the **Ordering Application** what the rules are for using the polling service. 

        **Duplicate Events and Order Date:**

        Eventually the API may return the same event more than once, for example the PLACED event including old orders. For this reason it is important that your application handles the uniqueness of requests and events through id and the date through "createdAt".

        Therefore, when receiving an event, you must check the event id and validate that this event (id) has not been processed before. If this event has already been received previously, it must be discarded.

        > **Please note**: merchant **Software Services** should only accept a new order or update the status of an order after validating that the event has not been processed before.

        ### Acknowledgment Events

        When receiving new events, the **Software Service** should always send acknowledgement so that the **Ordering Application** does not send that same event again;

        >**Important recommendations**:
        >
        > Merchants **Software Service** should make an acknowledgment request for each polling request with results.  
        > If it receives events that are not used by the itself, it needs to send the acknowledgment of these events anyway so that it is not receiving them every polling again.   
        > **Open Delivery** recommends that this be the default treatment for all events not yet mapped in the **Software Service** application.  
        > **Software Services** only needs to send acknowledgment of the event once."

    - name: ordersWebhook
      x-displayName: └───● Webhook (Optional)
      description: |-

        Receiving events via Webhook works as follows:

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/webhook.png" />
        </div>

        ### Order Event Notification
        Webhook is sent to notify the merchant **Software Service** that an new order event has happened on the **Ordering Application**.

        The merchant **Software Service** that implements this webhook, should return an HTTP `200` response code with an empty response body to acknowledge receipt of the webhook event. 
        If the **Ordering Application** does not receive a `200` acknowledgement response, than the webhook event will be resent based on the **Ordering Application** policies.

        ### Webhook Headers
        **Open Delivery** will include security headers for all requests made to the merchant **Software Service** webhook URL.

        **Header Description**

        | Header            | Description |
        | ----------------- | ----------- |
        | X-App-Id          | An Unique Identificator of the **Ordering Application** |
        | X-App-MerchantId   | An Unique Identificator of the **Merchant** receiving the order |      
        | X-App-Signature   | SHA256 hash of the request body, using the client secret as the key |

          
        **Webhook Security** 

        Webhook messages are signed so that the merchant **Software Service** can verify that the sender is a valid **Ordering Application**. 
        Webhooks requests contain an X-App-Signature header. 
        The value of this field is a lowercased hexadecimal HMAC signature of the webhook HTTP request body, using the client secret as a key and SHA256 as the hash function.

    - name: ordersDetails
      x-displayName: └───● Order Details
      description: |-

        Before confirming or canceling an order, it is necessary to get the order details so that the merchant **Software Service** user can check if he will be able to prepare and deliver this order, such as checking if he has all the necessary items and if he is available to make the delivery to the informed address.

        Through the GET /orders/{id} endpoint the merchant **Software Service** can get all the details of an order.

        This endpoint returns the code 200 and the content of the request. If an invalid request id or the id of an expired order is entered (depending on the **Ordering Application** policy) the endpoint returns 404.

        In this section you will find all the details of the payload of an order:

        <SchemaDefinition schemaRef="#/components/schemas/Order" />

    - name: ordersStatus
      x-displayName: └───● Order Event Update
      description: |-

        Following the order lifecycle, the merchant **Software Service** needs to notify the **Ordering Application** of the upcoming order status.
        
        After acknowledging receipt of a new order event (either via polling or webhook) is expected that the **Software Service** explicitly 
        **POST [/orders/{orderId}/confirm](#operation/confirmOrder)** or **POST [/orders/{orderId}/requestCancellation](#operation/requestCancellation)** within a time window set by the **Ordering Application**.
        Otherwise the order can time out and auto-cancel and the merchant can suffer a penalty based on the **Ordering Application** policy.   
        Order acceptances should be posted as quickly as possible to minimize consumer cancellations.

        When the order is ready, it is expected that a request will be sent to **[/orders/{orderId}/readyForPickup](#operation/orderReady)**

        When the order goes out for Delivery, it is expected that a request will be sent to **[/orders/{orderId}/dispatch](#operation/dispatchOrder)**.

        > When sending requests to these endpoints, is expected that the **Ordering Application** notifies the consumer of the progress of the order.

    - name: ordersCancellation
      x-displayName: └───● Order Cancellation
      description: |-

        An order can be canceled for several reasons and the initiative to cancel an order can come from the merchant, the customer, or the **Ordering Application**.   
        It may also happen that the delivery person requests the cancellation in some scenarios, such as when the customer is not found at the delivery address.

        > **Cancellation Rules**
        >  
        > It is expected that both the **Ordering Application** and merchant **Software Service** have their own order cancellation policies and inform their users.

        A cancellation request will always be an asynchronous processing, where one party makes a cancellation request and the other accepts or refuses it."

        A cancellation request must always contain:

        - **reason**: Open text field indicating the reason for the cancellation.
        - **code**: An enumerator containing a cancellation reason.  
        - **mode**: Field indicating whether the cancellation occurred Automatically or Manually.

        The cancellation can be requested by:

        ### **Software Service** (Merchant):

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/software_cancel_request.png" />
        </div>

        If the merchant wants to cancel an order, it must make a **POST [/orders/{orderId}/requestCancellation](#operation/requestCancellation)** request.

        > **Penalties**
        >
        > Avoid order cancellations! Excessive cancellations can result in some penalties (depending on the **Ordering Application**'s** policy) such as having the merchant temporarily closed on the platform.

        **Cancellation Validation**

        The Cancellation request does not guarantee that the order is cancelled. When sending a request [/orders/{orderId}/requestCancellation](#operation/requestCancellation), the **Ordering Application** will send the code 202 (accepted) in response.
        This does not yet mean that the request has been cancelled. It means that the request has been accepted and will be processed by the **Ordering Application** cancellation service. As a result of this request, the merchant **Software Service** may receive at the next polling (or via webhook) one of the following events:

        - CANCELLATION_REQUEST_DENIED
        - CANCELLED

        The order should only be Canceled when the CANCELLED event is generated.

        > Cancellation rules may vary depending on the timing of the order (before or after confirmation). In some situations it is possible that the **Ordering Application** cancellation service will consult with the consumer on whether or not the consumer accepts the cancellation of the order.

        ``` 
        Cancellation codes:

        - SYSTEMIC_ISSUES
        - DUPLICATE_APPLICATION
        - UNAVAILABLE_ITEM
        - RESTAURANT_WITHOUT_DELIVERY_MAN
        - OUTDATED_MENU
        - ORDER_OUTSIDE_THE_DELIVERY_AREA
        - BLOCKED_CUSTOMER
        - OUTSIDE_DELIVERY_HOURS
        - INTERNAL_DIFFICULTIES_OF_THE_RESTAURANT
        - RISK_AREA
        ``` 

        > **Important**: It is recommended that the **Ordering Application** makes a new request on the [/merchant](#operation/getMerchant) endpoint whenever a merchant makes a Cancellation request.

        ### **Ordering Application**

        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/orderingApp_cancel_request.png" />
        </div>

        Cancellation by **Ordering Application** can happen by:
        ```
        code: CONSUMER_CANCELLATION_REQUESTED
        ```  

        The consumer can request the cancellation of an order. 
        Depending on the cancellation rules applied, this option may not be enabled for all merchants. 
        It may also only be allowed at certain times, such as before the order is confirmed.
        ```
        code: OTHER_CANCELLATION_REASON
        ```

        Ordering Aplications may cancel the order for reasons other than via costumer.

        **Cancellation Handshake**

        When the request occurs the merchant **Software Service** will receive an ORDER_CANCELLATION_REQUESTED event in polling (or via webhook) and must manifest itself through the following endpoints:

        **[/orders/{orderId}/acceptCancellation](#operation/cancellationAccepted)**  
        **[/orders/{orderId}/denyCancellation](#operation/cancellationDenied)**

        This request will be processed by the **Ordering Application**'s** cancellation service (asynchronously) and the merchant **Software Service** will receive in the next polling (or webhook) the following event(s):

        CANCELLATION_DENIED or CANCELLED


x-tagGroups:
  - name: ""
    tags:
      - securitySection
      - authentication         
  - name: ""
    tags:
      - merchantSection
  - name: "└──◌ Overview and Structure"
    tags:
      - merchantOverview
      - merchantStructure
  - name: "└──◌ api"
    tags:
      - merchantEndpoints
  - name: "└──◌ Updates and Status"
    tags:
      - merchantUpdate
      - merchantStatus
  - name: ""
    tags:
      - ordersSection
  - name: "└──◌ Overview"
    tags:
      - ordersOverview
  - name: └──◌ Events
    tags:
      - ordersPolling
      - ordersWebhook
  - name: └──◌ Details
    tags:
      - ordersDetails
  - name: └──◌ Actions
    tags:
      - ordersStatus
      - ordersCancellation


paths:

  # Authentication

    /oauth/token:
      post:
        operationId: "getToken"
        tags:
          - "authentication"
        summary: "Get Access Token"
        description: |-
          Requests new access token for accessing **Ordering Application** API resources.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        requestBody:
          $ref: "#/components/requestBodies/Token"
        responses:
          "200":
            description: "Successful token request."
            content:
              "application/json":
                schema:
                  $ref: "#/components/schemas/TokenResponse"
          "401":
            description: "Bad credentials"
          "500":
            description: "Unexpected error"

  # Merchant

    /v1/merchant:
      get:
        tags:
          - "merchantEndpoints"
        operationId: "getMerchant"
        summary: "Get information of a Merchant"
        security:
          - {}
          - apiKey: []
        description: |-
          Endpoint to get all data of a specific merchant, such as basic info, menus, and services.

          >  This endpoint can optionally require an **apiKey** for authentication.
          >  Check with the **Software Service** that hosts the endpoint whether authentication is required or not.

          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **SOFTWARE SERVICE**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionGETOA_SS.png" />
          </div>
        responses:
          "200":
            description: "Successful merchant return."
            content:
              "application/json":
                schema:
                  $ref: "#/components/schemas/Merchant"
                examples:
                  menuExample:
                    $ref: "#/components/examples/merchantExample"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/merchantStatus:
      get:
        parameters:
          - in: "query"
            name: "merchantId"
            required: true
            schema:
              $ref: "#/components/schemas/Merchant/properties/id"
        tags:
          - "merchantStatus"
        operationId: "getMerchantStatus"
        summary: "Health Check on a Merchant"
        security:
          - OAuth2: [od.all]
        description: |-
          Get specific merchant info reading status provided by the **Ordering Application**.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionGETSS_OA.png" />
          </div>
        responses:
          "200":
            description: "Merchant Status"
            content:
              "application/json":
                schema:
                  $ref: "#/components/schemas/MerchantStatus"
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

  # Orders

    "/v1/events:polling":
      get:
        operationId: pollingEvents
        parameters:
          - name: "x-polling-merchants"
            in: "header"
            required: true
            schema:
              type: array
              description: |-
                Subset of merchants to fetch events from. Must either be omitted or non-empty.
                > At this time, this field will only return data from the authenticated merchant, since authentication occurs per merchant and not per application. This field may be used in future versions. 
              items:
                $ref: "#/components/schemas/Merchant/properties/id"
          - name: "eventType"
            in: "query"
            schema:
              type: array
              description: |-
                Desired event types. All other events not selected by group will be automatically acknowledged and omitted from the response. 
                Must either be omitted or non-empty.

                **Event Types definitions:**
                > `CREATED` : Order created.\
                > `CONFIRMED` : Order confirmed.\
                > `DISPATCHED` : Order went out for delivery.\
                > `READY_FOR_PICKUP`: Order ready for pickup.\
                > `PICKUP_AREA_ASSIGNED` : Designated area to pick up the order.\
                > `CONCLUDED` : Order completed.\
                > `CANCELLATION_REQUESTED` : Sent by the **Software Service** to the **Ordering Application**.\
                > `CANCELLATION_REQUEST_DENIED` : It must be sent from the **Ordering Application** to the **Software Service**.\
                > `CANCELLED` : When the order is actually cancelled.\
                > `ORDER_CANCELLATION_REQUEST`: It must be sent from the **Ordering Application** to the **Software Service**.
              items:
                $ref: "#/components/schemas/Event/properties/eventType"

        tags:
          - "ordersPolling"
        summary: "Get New Events"
        security:
          - OAuth2: [od.all]
        description: |-
          "Polls events for any orders from merchants associated with the authenticated user.
          Each event received from this endpoint must be properly acknowledged, otherwise it will continue to be returned on further requests.
          In the body of the request, send an array containing only the event ids. Each request accepts a list of at most 2000 event ids."
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionGETSS_OA.png" />
          </div>
        responses:
          "200":
            description: "List of events."
            content:
              "application/json":
                schema:
                  type: array
                  items:
                    $ref: "#/components/schemas/Event"
          "204":
            description: "No content."       
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/events/acknowledgment:
      post:
        requestBody:
          $ref: "#/components/requestBodies/AckEvents"
        tags:
          - "ordersPolling"
        operationId: pollingAcknowledgment
        summary: "Acknowledge Events"
        security:
          - OAuth2: [od.all]
        description: |-
          Acknowledge a set of events, dismissing them from future polling calls.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "202":
            $ref: "#/components/responses/Accepted"
          "400":
            $ref: "#/components/responses/BadRequest"
          "404":
            $ref: "#/components/responses/NotFound"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}:
      get:
        parameters:
          - name: "orderId"
            required: true
            in: "path"
            schema:
              type: "string"
              format: "UUID"
        tags:
          - "ordersDetails"
        operationId: ordersDetails  
        summary: "Get Order Details"
        security:
          - OAuth2: [od.all]
        description: |-
          Endpoint to consult the details of an order.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionGETSS_OA.png" />
          </div>
        responses:
          "200":
            description: "Order returning success."
            content:
              "application/json":
                schema:
                  $ref: "#/components/schemas/Order"
                # examples:
                #   orderExample:
                #     $ref: "#/components/examples/orderExample"
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}/confirm:
      post:
        parameters:
          - name: id
            in: "path"
            required: true
            schema:
              type: "string"
              format: "UUID"
        requestBody:
            content:
              "application/json":
                schema:
                  $ref: "#/components/schemas/OrderConfirmed"
        tags:
          - "ordersStatus"
        operationId: confirmOrder
        summary: "Confirm"
        security:
          - OAuth2: [od.all]
        description: |-
          Confirms receipt of order.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "202":
            $ref: "#/components/responses/Accepted"
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}/requestCancellation:
      post:
        parameters:
          - name: id
            in: "path"
            required: true
            schema:
              type: "string"
              format: "UUID"
        requestBody:
          $ref: "#/components/requestBodies/CancelRequest"
        tags:
          - "ordersCancellation"
        operationId: "requestCancellation"
        summary: "Request order cancellation"
        security:
          - OAuth2: [od.all]
        description: |-
          Request order cancellation.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "202":
            $ref: "#/components/responses/Accepted"
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}/acceptCancellation:
      post:
        parameters:
          - name: id
            in: "path"
            required: true
            schema:
              type: "string"
              format: "UUID"
        tags:
          - "ordersCancellation"
        operationId: "cancellationAccepted"
        summary: "Accept order cancellation"
        security:
          - OAuth2: [od.all]
        description: |-
          Accept order cancellation"
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "200":
            description: "Order cancellation has been confirmed."
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}/denyCancellation:
      post:
        parameters:
          - name: id
            in: "path"
            required: true
            schema:
              type: "string"
              format: "UUID"
        requestBody:
          $ref: "#/components/requestBodies/CancelDenied"
        tags:
          - "ordersCancellation"
        operationId: "cancellationDenied"
        summary: "Deny order cancellation"
        security:
          - OAuth2: [od.all]
        description: |-
          Order Cancellation denied.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "200":
            description: "Order cancellation has been denied."
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}/readyForPickup:
      post:
        parameters:
          - name: id
            in: "path"
            required: true
            schema:
              type: "string"
              format: "UUID"
        tags:
          - "ordersStatus"
        summary: "Ready For Pickup"
        operationId: "orderReady"
        security:
          - OAuth2: [od.all]
        description: |-
          Informs you that the order is ready for pickup
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "202":
            $ref: "#/components/responses/Accepted"
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"

    /v1/orders/{orderId}/dispatch:
      post:
        parameters:
          - name: id
            in: "path"
            required: true
            schema:
              type: "string"
              format: "UUID"
        tags:
          - "ordersStatus"
        operationId: "dispatchOrder"
        summary: "Dispatch"
        security:
          - OAuth2: [od.all]
        description: |-
          Dispatch an Order.
          <br /><br />
          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**

          <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
          <div align="center">
            <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
          </div>
        responses:
          "202":
            $ref: "#/components/responses/Accepted"
          "400":
            $ref: "#/components/responses/BadRequest"
          "403":
            $ref: "#/components/responses/AccessDenied"
          "404":
            $ref: "#/components/responses/NotFound"
          "503":
            $ref: "#/components/responses/ServiceUnavailable"


x-webhooks:

  # Merchant

  /v1/menuUpdated:
    post:
      summary: New Merchant Update Notification
      description: |-

        > **POST /v1/merchantUpdate** 


        Information about a update in the systems.
        
        This endpoint can be used in the following ways:

        **1 - Sent with an empty body:**  
        This will force **Ordering Application** to make a new request to the **[GET /merchant](#operation/getMerchant)** endpoint to update all the **merchant** information.

        **2 - Sent with only the `merchantStatus` field:**  
        This will force the opening or closing of the **merchant** within the **Ordering Application**, without forcing a new **[GET /merchant](#operation/getMerchant)** call.

        **3 - Sent only with the `entityType` and `updatedObjects` fields:**  
        This will force the **Ordering Application** to update only the sent objects, without forcing a new **[GET /merchant](#operation/getMerchant)** call.
        > When the `entityType` field is populated, the `updatedObjects` field cannot be empty.

        **4 - Sent the `merchantStatus`, `entityType` and `updatedObjects` fields:**  
        This will force scenarios 2 and 3 to happen simultaneously.

        <br /><br />  
        <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **ORDERING APPLICATION**  

        <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTSS_OA.png" />
        </div>
      operationId: menuUpdated
      tags:
        - merchantUpdate
      security:
        - OAuth2: [od.all]
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MerchantUpdate"
      responses:
        "200":
          description: Return a 200 status to indicate that the data was received successfully
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/AccessDenied"
        "404":
          $ref: "#/components/responses/NotFound"
        "503":
          $ref: "#/components/responses/ServiceUnavailable"

  # Order

  /v1/newEvent:
    post:
      parameters:
        - in: "header"
          name: "X-App-Id"
          required: true
          schema:
            type: "string"
            format: "UUID"
            description: "An unique Identificator of the `**Ordering Applications**`. The same ID must be sent to all `**Software Service**s` that implements this webhook."
        - in: "header"
          name: "X-App-MerchantId"
          required: true
          schema:
            $ref: "#/components/schemas/Merchant/properties/id"
            description: "An unique Identificator of the Merchant "
        - in: "header"
          name: "X-App-Signature"
          required: true
          schema:
            type: "string"
            format: "SHA256"
            description: "SHA256 hash of the request body, using the client secret as the key"
      summary: New Order Event Notification
      description: |-
        > **POST /v1/event** 
        
        Information about a new event in the systems
        <br /><br />
        <span style="text-decoration:underline; color:#26323880; font-size:13.006px">HOST:</span> **SOFTWARE SERVICE**

        <span style="text-decoration:underline; color:#26323880; font-size:13.006px">DIRECTION:</span>
        <div align="center">
          <img src="https://abrasel-nacional.github.io/docs/images/directionPOSTOA_SS.png" />
        </div>
      operationId: newEvent
      tags:
        - ordersWebhook
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Event"
      responses:
        "200":
          description: Return a 200 status to indicate that the data was received successfully
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/AccessDenied"
        "404":
          $ref: "#/components/responses/NotFound"
        "503":
          $ref: "#/components/responses/ServiceUnavailable"


components:

  securitySchemes:
      apiKey:
        type: apiKey
        description:
          "The apiKey is a key that should be generated by the endpoint's host and passed to its clients.
          Each client of the endpoint can have its own key.
          The creation and content of the key is of responsibility of the endpoint's host.

          > As of the time of this release, only the **[/merchant](#operation/getMerchant)** endpoint can require authentication via apiKey."

        in: header
        name: X-API-KEY

      OAuth2:
        type: oauth2
        description:
          "Oauth2 should be used for all API calls from the **`Software Service`** to the **`Ordering Application`**.\n

          As of the time of this release only one scope will be used for all endpoints: `od.all`.

          ### Generating a Client Credentials Token

          To generate a client credentials token, the merchant **Software Service** must retrieve the **clientId** and **clientSecret** from a **Ordering Application** Company and access the [/oauth/token](#operation/getToken) endpoint.

          > The **Ordering Application** MUST provide one `clientId` and `clientSecret` credentials for each individual merchant it will work with, even if these merchants use the same **Software Service**.

          ### Usage

          The **accessToken** field will contain the token used to authenticate against the **Open Delivery** APIs. Once you’ve obtained this token, you can provide it in the “Authorization” header of requests you make to endpoints that require client credentials scopes.

          The **expiresIn** field indicates the lifetime of the access token, provided in seconds. This should be cached and re-used across requests until (or shortly before) expiration, not re-generated per request.

          ```

          curl \n
          -H 'authorization: Bearer <TOKEN>' \n
          https://{baseURL}/v1/events:polling

          ```

          > Refresh Token is not available at this version."
        flows:
          clientCredentials:
            tokenUrl: oauth/token
            scopes:
              od.all: "Access to all **Open Delivery** APIs"

  requestBodies:

      Token:
        required: true
        content:
          "application/x-www-form-urlencoded":
            schema:
              $ref: "#/components/schemas/TokenRequest"
            examples:
              newToken:
                $ref: "#/components/examples/tokenExample"

      AckEvents:
        required: true
        content:
          "application/json":
            schema:
              type: "array"
              items:
                $ref: "#/components/schemas/AckEvents"

      ConfirmedOrder:
        description: "Order confirmation."
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/OrderConfirmed"

      CancelRequest:
        required: true
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/RequestCancelled"

      CancelDenied:
        description: "Request for order cancellation has been denied."
        required: true
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/RequestDenied"

  responses:

      Accepted:
        description: "Request has been accepted for processing."
      BadRequest:
        description: "Bad Request"
        content:
          application/problem+json:
            schema:
              $ref: "#/components/schemas/Error"
      NotFound:
        description: "The requested resource was not found."
        content:
          application/problem+json:
            schema:
              $ref: "#/components/schemas/Error"
      AccessDenied:
        description: "Authenticated participant request that violates some authorization rule."
        content:
          application/problem+json:
            schema:
              $ref: "#/components/schemas/Error"
      ServiceUnavailable:
        description: "Service is not currently available. Requested service may be under maintenance or outside the operating window."
        content:
          application/problem+json:
            schema:
              $ref: "#/components/schemas/Error"

  schemas:

    #Authentication

      TokenRequest:
        type: "object"
        title: "TokenRequest"
        required: ["client_id", "client_secret", "grant_type"]
        properties:
          client_id:
            type: "string"
            description: "Client identifier provided by the **Ordering Application**."
          client_secret:
            type: "integer"
            description: "Client Secret provided by the **Ordering Application**."
          grant_type:
            type: "string"
            description: "The OAuth grant type. Currently, the only supported grant type is `client_credentials`."
            enum:
              - "client_credentials"

      TokenResponse:
        type: "object"
        title: "TokenResponse"
        required: ["access_token, token_type"]
        properties:
          access_token:
            type: "string"
            description: "A JWT representing the access token."
          token_type:
            type: "string"
            description: "The token type. Currently, the only supported type is `bearer`"
            enum:
              - "bearer"
          expires_in:
            type: "number"
            description: "The token expiration time in seconds"

    #Merchant

      Merchant:
        type: "object"
        title: "MenuEntity"
        required:
          [
            "lastUpdate", "TTL", id, "status", "basicInfo", "services", "items", "menus", "categories", "itemOffers",]
        properties:
          lastUpdate:
            type: "string"
            format: "date-time"
            description: "The last modified date and time in ISO timestamp format but with type String. \n\nThis should be used in conjuction of the TTL field to update the information on the ordering aplication. \n\n(UTC date-time in ISO timestamp format)."
            example: "2021-05-27T20:45:10.332Z"
          TTL:
            type: "integer"
            description: "Time to Live (in seconds).
              \nMin: 500
              Max: 86400.
              \nA new request must be done when the TTL expires."
            example: 500
          id:
            type: "string"
            description:
                "Unique Identifier. Identifies the merchant in the different systems that the merchant will communicate.
                \n\n Must be formatted with:  
                \n `Merchant Document + UUID + Software Information*`

                > *Software Information is optional.

                \n\n This id must be generated by the merchant's **`Software Service`**."
          status:
            type: "string"
            description: "Indicates if the Merchant is Avaliable or Unavaliable. Only use this type when you must close (disable) the merchant due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."
            enum:
              - AVAILABLE
              - UNAVAILABLE
            example: "AVAILABLE"
          basicInfo:
            type: "object"
            description: "A required entity to implement. Describes basic info of a merchant."
            allOf:
              - $ref: "#/components/schemas/BasicInfo"
          services:
            type: "array"
            description: "A required entity to implement. Describes food ordering services details for a merchant."
            items:
              $ref: "#/components/schemas/Service"
          menus:
            type: "array"
            description: "A required entity to implement. Describes an array of menus."
            items:
              $ref: "#/components/schemas/Menu"
          categories:
            type: "array"
            description: "A required entity to implement. Describes an array of sections in the menu where `ItemOffers` will be showed."
            items:
              type: "object"
              $ref: "#/components/schemas/Category"
          itemOffers:
            type: "array"
            description: "A required entity to implement. Describes an array of offers for the `Items`."
            items:
              type: "object"
              $ref: "#/components/schemas/ItemOffer"
          items:
            type: "array"
            description: "A required entity to implement. Describes an array of items. To be used with an `ItemOffer` or an `Option`."
            items:
              $ref: "#/components/schemas/Item"
          optionGroups:
            type: "array"
            description: "An optional entity to implement. Describes additional options of an `ItemOffer`."
            items:
              $ref: "#/components/schemas/OptionGroup"
          availabilities:
            type: "array"
            description: "An optional entity to implement. Describes the time period during which a `Category` or an `ItemOffer` entity is served."
            items:
              type: "object"
              allOf:
                - $ref: "#/components/schemas/Availability"

      MerchantDescription:
        type: "object"
        title: "MenuEntity"
        required:
          [
            "lastUpdate",
            "TTL",
            id,
            "status",
            "basicInfo",
            "services",
            "items",
            "menus",
            "categories",
            "itemOffers",
          ]
        properties:
          lastUpdate:
            type: "string"
            format: "date-time"
            description: "The last modified date and time. \n\nThis should be used in conjuction of the TTL field to update the information on the ordering aplication. \n\n(UTC date-time in ISO timestamp format)."
          TTL:
            type: "integer"
            description: "Time to Live (in seconds).
              \nMin: 500
              Max: 86400.
              \nA new request must be done when the TTL expires."
          id:
            type: "string"
            format: "UUID"
            description:
              "Unique Identifier. Must be formatted with `Merchant Document + UUID`
              \n\n This id must be generated by the company responsible for the merchant's menu and have to be informed in the Order object by the ***Ordering Application***."
          status:
            type: "string"
            description: "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."
            enum:
              - AVAILABLE
              - UNAVAILABLE
          basicInfo:
            type: "object"
            description: "See: **[BasicInfo](#section/BasicInfo)**
              \n\n A required entity to implement. Describes basic info of a merchant."
          services:
            type: "array"
            description: "See: **[Service](#section/Service)**
              \n\n A required entity to implement. Describes food ordering services details for a merchant."
            items:
              type: "object"
          menus:
            type: "array"
            description: "See: **[Menu](#section/Menu)**
              \n\n A required entity to implement. Describes an array of menus."
            items:
              type: "object"
          items:
            type: "array"
            description: "See: **[Item](#section/Menu/Item)**
              \n\n A required entity to implement. Describes an array of items. To be used with an `ItemOffer` or an `OptionGroups`."
            items:
              type: "object"
          categories:
            type: "array"
            description: "See: **[Category](#section/Menu/Category)**
              \n\n A required entity to implement. Describes an array of sections in the menu where `ItemOffers` will be showed."
            items:
              type: "object"
          itemOffers:
            type: "array"
            description: "See: **[ItemOffers](#section/Menu/ItemOffer)**
              \n\n A required entity to implement. Describes an array of offers for the `Items`."
            items:
              type: "object"
          optionGroups:
            type: "array"
            description: "See: **[Options](#section/Menu/OptionGroup-and-Option)**
              \n\n An optional entity to implement. Describes additional options of an `ItemOffer`."
            items:
              type: "object"
          availabilities:
            type: "array"
            description: "See: **[Availability](#section/Menu/Availability)**
              \n\n An optional entity to implement. Describes the time period during which a `Category` or an `ItemOffer` entity is served."
            items:
              type: "object"

      BasicInfo:
        type: "object"
        title: "BasicInfo"
        required:
          [
            "name",
            "document",
            "corporateName",
            "description",
            "averagePreparationTime",
            "minOrderValue",
            "merchantType",
            "merchantCategories",
            "address",
            "contactEmails",
            "contactPhones",
            "logoImage",
          ]
        properties:
          name:
            type: "string"
            description: "Merchant Public Name"
            maxLength: 500
            example: "Pizza Plaza"
          document:
            type: "string"
            description: "Merchant Document"
            pattern: "/^\\d{14}$/"
            example: "22815773000169"
          corporateName:
            type: "string"
            description: "Merchant Corporate Name"
            maxLength: 500
            example: "Food Company"
          description:
            type: "string"
            description: "Merchant Description"
            example: "Food company specializing in pizzas."
          averageTicket:
            type: "number"
            description: "Average Ticket. Can be used to show the price range of items available at the merchant. It is not mandatory, but recommended to be used."
            example: 90
          averagePreparationTime:
            type: "number"
            description: "Average amount of time preparing an order takes, in minutes."
            example: 20
          minOrderValue:
            type: "object"
            description: "Minimum order value that the merchant accepts."
            allOf:
              - $ref: "#/components/schemas/Price"
          merchantType:
            type: "string"
            description: "Merchant Type.

              Currently, only `RESTAURANT` is accepted."
            enum:
              - "RESTAURANT"
            example: "RESTAURANT"
          merchantCategories:
            type: "array"
            description: "Merchant Categories"
            items:
              type: "string"
              enum:
                - "BURGERS"
                - "PIZZA"
                - "FAST_FOOD"
                - "HOT_DOG"
                - "JAPANESE"
                - "DESSERTS"
                - "AMERICAN"
                - "ICE_CREAM"
                - "BBQ"
                - "SANDWICH"
                - "MEXICAN"
                - "BRAZILIAN"
                - "PASTRY"
                - "ARABIAN"
                - "COMFORT_FOOD"
                - "VEGETARIAN"
                - "VEGAN"
                - "BAKERY"
                - "HEALTHY"
                - "ITALIAN"
                - "CHINESE"
                - "JUICE_SMOOTHIES"
                - "SEAFOOD"
                - "CAFE"
                - "SALADS"
                - "COFFEE_TEA"
                - "PASTA"
                - "BREAKFAST_BRUNCH"
                - "LATIN_AMERICAN"
                - "CONVENIENCE"
                - "PUB"
                - "HAWAIIAN"
                - "EUROPEAN"
                - "FAMILY_MEALS"
                - "FRENCH"
                - "INDIAN"
                - "PORTUGUESE"
                - "SPANISH"
                - "GOURMET"
                - "KIDS_FRIENDLY"
                - "SOUTH_AMERICAN"
                - "SPECIALTY_FOODS"
                - "ARGENTINIAN"
                - "PREMIUM"
                - "AFFORDABLE_MEALS"
            example: ["PIZZA", "FAMILY_MEALS", "PREMIUM"]
          address:
            type: "object"
            description: "Merchant Address"
            allOf:
              - $ref: "#/components/schemas/Address"
          contactEmails:
            type: "array"
            description: "Merchant Contact Emails"
            items:
              type: "string"
            example: ["food@company.com"]
          contactPhones:
            type: "object"
            description: "Merchant Contact Phones"
            allOf:
              - $ref: "#/components/schemas/ContactPhones"
          logoImage:
            type: "object"
            description: "Image to be used as the merchant logo"
            allOf:
              - $ref: "#/components/schemas/Image"
          bannerImage:
            type: "object"
            description: "Image to be used as the merchant banner (the banner display depends on the client application interface)"
            allOf:
              - $ref: "#/components/schemas/Image"
          createdAt:
            type: "string"
            format: date-time
            description: "Merchant creation date and time. \n\n(UTC date-time in ISO timestamp format)."

      ListMerchant:
        type: "array"
        title: "MerchantList"
        required: ["merchantId", "name"]
        items:
          type: "object"
          properties:
            "merchantId":
              type: "string"
              format: "UUID"
            "name":
              type: "string"
              description: "Restaurant Name"
            "merchantURL":
              type: "string"
              description: "Optional merchant URL."

      Service:
        type: "object"
        title: "Service"
        required: [id, "status", "serviceType", "menuId", "serviceHours"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "Unique Identifier"
            example: "f078e8e2-3044-4eec-b4a8-8359810de123"
          status:
            type: "string"
            description: "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."
            enum:
              - AVAILABLE
              - UNAVAILABLE
            example: "AVAILABLE"
          serviceType:
            type: "string"
            description: "The type of service being offered."
            enum:
              - DELIVERY
              - TAKEOUT
            example: "DELIVERY"
          menuId:
            description: "The id value of the `Menu` entity correlated to this `Service` entity."
            type: string
            format: UUID
            example: "f627ccdc-6789-456f-a782-148538d5035b"
          serviceArea:
            type: "object"
            description: "A conditional entity to implement (required if the Service entity associated has serviceType set to `DELIVERY`). Describes the geographical region in which food can be delivered."
            allOf:
              - $ref: "#/components/schemas/ServiceArea"
          serviceHours:
            type: "object"
            description: "A required entity to implement. Describes the time window which users can place orders."
            allOf:
              - $ref: "#/components/schemas/ServiceHours"

      ServiceArea:
        type: "object"
        title: "Service Area"
        required: [id]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the service area."
            example: "01339e6d-520b-429e-bc7c-dcfd2df42278"
          polygon:
            type: "array"
            description: "If the `polygon` is chosen to be used, `geoRadius` is not required.\n\n\n\nA polygon or multipolygon expressed as a series of three or more space delimited points."
            items:
              allOf:
                - $ref: "#/components/schemas/Polygon"
          geoRadius:
            type: "object"
            description: "If the `geoRadius` is chosen to be used, `polygon` is not required. Indicates the approximate radius (in meters) of the CIRCLE area."
            allOf:
              - $ref: "#/components/schemas/GeoRadius"

      Polygon:
        type: "object"
        title: "Polygon"
        required: [geoCoordinates]
        properties:
          geoCoordinates:
            type: "array"
            description: "Coordinates of each point of the polygon. It is recommended that the first and last points be the same, but it is not required.\n\n\n\nEach point in a polygon or multipolygon is defined by a latitude point followed by a longitude point. You also must specify the points in a counter-clockwise direction."
            items:
              type: "object"
              title: "geoCoordinate"
              required: ["latitude", "longitude"]
              properties:
                latitude:
                  type: "number"
                  description: "Indicates the latitude coordinate of the polygon point.\n\n\n\nLatitude in degrees. Values are restricted to the range [[-90, 90]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
                  example: -23.54809
                longitude:
                  type: "number"
                  description: "Indicates the longitude coordinate of the polygon point.\n\n\n\nLongitude in degrees. Values are restricted to the range [[-180, 180]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
                  example: -46.63638                 
          price:
            type: "object"
            description: "Price of the fee for this polygon"
            allOf:
              - $ref: "#/components/schemas/Price"
            example: { value: 5, currency: "BRL" }
          estimateDeliveryTime:
            type: "integer"
            description: "Estimate delivery time for this polygon in minutes"

      GeoRadius:
        type: "object"
        title: "GeoRadius"
        required: [geoMidpointLatitude, geoMidpointLongitude, radius]
        properties:
          geoMidpointLatitude:
            type: "number"
            description: "Indicates the latitude coordinate at the center of the CIRCLE area.\n\n\n\nLatitude in degrees. Values are restricted to the range [[-90, 90]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
            example: -23.54809
          geoMidpointLongitude:
            type: "number"
            description: "Indicates the longitude coordinate at the center of the CIRCLE area.\n\n\n\nLongitude in degrees. Values are restricted to the range [[-180, 180]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
            example: -46.63638  
          radius:
            type: "array"
            description: "Informations about each radius of the CIRCLE that the merchant serves."
            items:
              type: "object"
              title: "radius"
              required: ["size"]
              properties:
                size:
                  type: "integer"
                  description: "The size of the CIRCLE radius in meters."
                price:
                  type: "object"
                  description: "Price of the fee for this CIRCLE size."
                  allOf:
                    - $ref: "#/components/schemas/Price"
                  example: { value: 5, currency: "BRL" }
                estimateDeliveryTime:
                  type: "integer"
                  description: "Estimate delivery time for this CIRCLE size in minutes."

      ItemPrice:
        type: "object"
        title: "Item Price"
        required: ["value", "originalValue", "currency"]
        properties:
          value:
            type: "number"
            description: "The actual price value. 4 decimals places are accepted"
            example: 50
          originalValue:
            type: "number"
            description: "The orginal price value. 4 decimals places are accepted"
            example: 50
          currency:
            type: "string"
            pattern: "^[A-Z]{3}$"
            description: "The 3-letter ISO 4217 currency code."
            example: "BRL"

      ServiceHours:
        type: "object"
        title: "Service Hours"
        required: [id, "weekHours"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the service hours."
            example: "fb093d8c-2ca5-40fb-afcf-472fbdae81cc"
          weekHours:
            type: array
            description: "A list of the day(s) of the week and time periods for which the service is valid."
            items:
              type: "object"
              allOf:
                - $ref: "#/components/schemas/Hours"
          holidayHours:
            type: array
            description: "Map of holiday dates, each with optional `timePeriods`. If a date does not have a time period specified, the restaurant will be closed for that date."
            items:
              type: "object"
              allOf:
                - $ref: "#/components/schemas/HolidayHours"

      Hours:
        type: "object"
        title: "Hours"
        required: ["dayOfWeek", "timePeriods"]
        properties:
          dayOfWeek:
            type: array
            description: "Day of the week for which these service hours are valid"
            items:
              type: "string"
              enum:
                - "MONDAY"
                - "TUESDAY"
                - "WEDNESDAY"
                - "THURSDAY"
                - "FRIDAY"
                - "SATURDAY"
                - "SUNDAY"
            example:
              [
                "MONDAY",
                "TUESDAY",
                "WEDNESDAY",
                "THURSDAY",
                "FRIDAY",
                "SATURDAY",
                "SUNDAY",
              ]
          timePeriods:
            type: "object"
            description: "Time window from which users' orders can be placed."
            allOf:
              - $ref: "#/components/schemas/TimePeriods"

      TimePeriods:
        type: "object"
        title: "Time Periods"
        required: ["startTime", "endTime"]
        properties:
          startTime:
            type: string
            format: time
            description: "Indicates the specific time of day in ISO format starting from which users' orders can be placed."
            example: "10:00:00.000Z"
          endTime:
            type: string
            format: time
            description: "Indicates the specific time of day in ISO format beyond which users' orders cannot be placed."
            example: "18:00:00.000Z"

      HolidayHours:
        type: "object"
        title: "Holiday Hours"
        required: ["date", "timePeriods"]
        properties:
          date:
            type: string
            format: date
            description: "date"
            example: "7/4/2021"
          timePeriods:
            type: "object"
            description: "hours"
            allOf:
              - $ref: "#/components/schemas/TimePeriods"

      Item:
        type: "object"
        title: "Item"
        required: [id, "name", "description", "externalCode", "unit"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the item."
            example: "732bd31e-77fc-47ee-88ee-a0437f97b198"
          name:
            type: "string"
            description: "Item name"
            maxLength: 150
            example: "1/2 Pepperoni"
          description:
            type: "string"
            description: "Item Description"
            example: "Pepperoni flavored pizza with LOTS of pepperoni."
          externalCode:
            type: "string"
            description: "Item External Code. (Tipically the merchant **Software Service** item code)"
            example: "233467"
          image:
            type: "object"
            description: "Image of the item"
            allOf:
              - $ref: "#/components/schemas/Image"
          nutritionalInfo:
            type: "object"
            description: "Nutrition information for the dish."
            allOf:
              - $ref: "#/components/schemas/NutritionalInfo"
          serving:
            type: "integer"
            description: "Field to show the number of people the portion serves."
            example: 2
          unit:
            type: "string"
            description: "Measure Unit of the Item"
            example: "kg"
          ean:
            type: "string"
            description: "EAN (European Article Number)"
            example: "7896005202074"

      NutritionalInfo:
        type: "object"
        title: "Nutritional Info"
        required: ["description", "calories"]
        properties:
          description:
            type: "string"
            description: 'Nutrition information in free text. For example "Contains preservatives".'
            example: "Contains preservatives"
          calories:
            type: "string"
            description: "The number of calories in Cal, kcal, or kJ, using the following format: value Cal or min-max Cal"
            pattern: "^[0-9]+(\\.[0-9]+)? ?(- ?[0-9]+(\\.[0-9]+)?)? [a-zA-Z]+$"
            example: "2000 Cal"
          allergen:
            type: "array"
            description: "Allergens of this Item"
            items:
              type: "string"
              enum:
                - "ALMONDS"
                - "ALPHA_ISOMETHYL_IONONE"
                - "ALCOHOL"
                - "AMYL_CINNAMAL"
                - "ANISE_ALCOHOL"
                - "BARLEY"
                - "BENZYL_ALCOHOL"
                - "BENZYL_BENZOATE"
                - "BENZYL_CINNAMATE"
                - "BENZYL_SALICYLATE"
                - "BRAZIL_NUTS"
                - "BUTYLPHENYL_METHYLPROPIONATE"
                - "CARROTS"
                - "CASHEW_NUTS"
                - "CELERY"
                - "CEREALS_CONTAINING_GLUTEN"
                - "CINNAMAL"
                - "CINNAMYL_ALCOHOL"
                - "CITRAL"
                - "CITRONELLOL"
                - "COCOA"
                - "CORIANDER"
                - "CORN"
                - "COUMARIN"
                - "CRUSTACEANS"
                - "EGGS"
                - "EUGENOL"
                - "EVERNIA_FURFURACEA"
                - "EVERNIA_PRUNASTRI"
                - "FARNESOL"
                - "FISH"
                - "GERANIOL"
                - "GLUTEN"
                - "HAZELNUTS"
                - "HEXYL_CINNAMAL"
                - "HYDROXYCITRONELLAL"
                - "KAMUT"
                - "LACTOSE"
                - "LUPINE"
                - "MACADAMIA_NUTS"
                - "METHYL_2_OCTYNOATE"
                - "MILK"
                - "MOLLUSCS"
                - "MUSTARD"
                - "NO_DECLARED_ALLERGENS"
                - "OAT"
                - "PEANUTS"
                - "PEAS"
                - "PECAN_NUTS"
                - "PISTACHIOS"
                - "POD_FRUITS"
                - "QUEENSLAND_NUTS"
                - "RYE"
                - "SESAME_SEEDS"
                - "SOYBEANS"
                - "SPELT"
                - "SULPHUR_DIOXIDE"
                - "TREE_NUTS"
                - "TREE_NUT_TRACES"
                - "WALNUTS"
                - "WHEAT"
              example: "GLUTEN"
          additives:
            type: "array"
            description: "Additives of this Item"
            items:
              type: "string"

          suitableDiet:
            type: "array"
            description: "The dish complies with the described dietary restriction"
            items:
              type: "string"
              enum:
                - "DIABETIC"
                - "GLUTEN_FREE"
                - "HALAL"
                - "HINDU"
                - "KOSHER"
                - "LOW_CALORIE"
                - "LOW_FAT"
                - "LOW_LACTOSE"
                - "LOW_SALT"
                - "VEGAN"
                - "VEGETARIAN"
          isAlcoholic:
            type: "boolean"
            description: "Indicates if an item is alcoholic."
            example: false

      Menu:
        type: "object"
        title: "Menu"
        required:
          [id, "name", "description", "externalCode", "disclaimer", "categoryId"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the menu."
            example: "f627ccdc-6789-456f-a782-148538d5035b"
          name:
            type: "string"
            description: "Menu name"
            maxLength: 500
            example: "Pizzas"
          description:
            type: "string"
            description: "Menu Description"
            example: "Pizza menu"
          externalCode:
            type: "string"
            description: "Menu External Code. (Tipically the merchant **Software Service** menu code)"
            example: "123"
          disclaimer:
            type: "string"
            description: "Disclaimer"
            example: "Lorem Ipsum is simply dummy text of the printing and typesetting industry."
          disclaimerURL:
            type: "string"
            format: "uri"
            description: "Disclaimer URL"
          categoryId:
            type: "array"
            description: "A list of the id values of the child `Category` entities that correspond to this `Menu` entity. Default assumes all `Category` entities are available in this menu."
            items:
              type: "string"
              format: "UUID"
            example:
              [
                "92fad022-2c28-4239-a026-989f5b555cb7",
                "6bb71850-1d40-49f9-8046-b13e068c0cca",
              ]

      Category:
        type: "object"
        title: "Category"
        required:
          [
            id,
            "index",
            "name",
            "description",
            "externalCode",
            "status",
            "availabilityId",
          ]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the category."
            example: "92fad022-2c28-4239-a026-989f5b555cb7"
          index:
            type: "integer"
            description: "Category display index."
            example: 0
          name:
            type: "string"
            description: "Category name."
            maxLength: 150
            example: "Salted Pizza"
          description:
            type: "string"
            description: "Category description."
            example: "Salted pizza flavors."
          image:
            type: "object"
            description: "Image of the category (the category image display depends on the client application interface)"
            allOf:
              - $ref: "#/components/schemas/Image"
          externalCode:
            type: "string"
            description: "Category External Code. (Tipically the merchant **Software Service** category code)"
            example: "13"
          status:
            type: "string"
            description: "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."
            enum:
              - AVAILABLE
              - UNAVAILABLE
            example: "AVAILABLE"
          availabilityId:
            type: "array"
            description: "The id values of `Availability` entities which provide details on when the category is available. Default assumes a `Category` is available at all times."
            items:
              allOf:
                - $ref: "#/components/schemas/Availability/properties/id"
            example: ["11d063c4-73a7-4f87-a0eb-71636cc02029"]
          itemOfferId:
            type: array
            description: "A list of the id values of the child `ItemOffer` entities that correspond to this `Category` entity. Default assumes all `ItemOffer` entities are available in this category."
            items:
              allOf:
                - $ref: "#/components/schemas/ItemOffer/properties/id"
            example: ["f080cfb3-5c4a-4eb7-907d-2de3bbb5dfb9"]

      ItemOffer:
        type: "object"
        title: "ItemOffer"
        required: [id, "itemId", "index", "price", "availabilityId"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the item offer."
            example: "f080cfb3-5c4a-4eb7-907d-2de3bbb5dfb9"
          itemId:
            type: "string"
            description: "The id value of the `Item` entity correlated to this `ItemOffer` entity."
            example: "732bd31e-77fc-47ee-88ee-a0437f97b198"
          index:
            type: integer
            description: "ItemOffer display index."
            example: 0
          price:
            type: "object"
            description: "Price of the menu item offer. Original and actual values can be informed, for showing discounts."
            allOf:
              - $ref: "#/components/schemas/ItemPrice"
            example: { value: 43, originalValue: 43, currency: "BRL" }
          availabilityId:
            type: "array"
            description: "The id values of `Availability` entities which provide details on when the menu item offer is available. Default assumes an `ItemOffer` is available at all times."
            items:
              allOf:
                - $ref: "#/components/schemas/Availability/properties/id"
            example: ["11d063c4-73a7-4f87-a0eb-71636cc02029"]
          optionGroupsId:
            type: "array"
            description: "A list of the id values of the child `OptionGroup` entities that correspond to this `ItemOffer` entity."
            items:
              allOf:
                - $ref: "#/components/schemas/OptionGroup/properties/id"
            example: ["fe67e551-f42f-499a-8afb-0ed893c71fa3"]

      OptionGroup:
        type: "object"
        title: "Option Group"
        required:
          [
            id,
            "index",
            "name",
            "description",
            "externalCode",
            "status",
            "minPermitted",
            "maxPermitted",
          ]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the option group."
            example: "fe67e551-f42f-499a-8afb-0ed893c71fa3"
          index:
            type: integer
            description: "Option Group display index."
            example: 0
          name:
            type: "string"
            description: "Option Group Name"
            maxLength: 150
            example: "Choose your salted pizza flavor"
          description:
            type: "string"
            description: "Option Group Description"
            example: "Choose your salted pizza flavor."
          externalCode:
            type: "string"
            description: "Option External Code. (Tipically the merchant **Software Service** option group code)"
            example: "12"
          status:
            type: "string"
            description: "Indicates if the entity is Avaliable or Unavaliable. Only use this type when you must disable the entity due to an unexpected event and you don't know when the service will be re-established (e.g. do not use for holidays)."
            enum:
              - AVAILABLE
              - UNAVAILABLE
            example: "AVAILABLE"
          minPermitted:
            type: integer
            description: "The minimum number of options which should be selected in the option group."
            example: 2
          maxPermitted:
            type: integer
            description: "The maximum number of options which should be selected in the option group."
            example: 2
          options:
            type: array
            description: "A list of `Option` entities that correspond to this option group"
            items:
              type: "object"
              description: "options"
              allOf:
                - $ref: "#/components/schemas/Option"

      Option:
        type: "object"
        title: "Option"
        required: [id]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the option."
            example: "e5232f14-430c-4a94-8ff6-289d5a16a87a"
          itemId:
            type: "string"
            description: "The id value of the `Item` entity correlated to this `Option` entity."
            example: "502ecf11-0509-48ed-b63c-6211c48fd9b9"
          index:
            type: integer
            description: "Option display index"
            example: 0
          price:
            type: "object"
            description: "Price of the option. Original and actual values can be informed, for showing discounts."
            allOf:
              - $ref: "#/components/schemas/ItemPrice"
          maxPermitted:
            type: integer
            description: "The maximum quantity of this option which can be selected in the option group."
            example: 1

      Availability:
        type: "object"
        title: "Availability"
        required: [id, "hours"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the availability."
            example: "11d063c4-73a7-4f87-a0eb-71636cc02029"
          startDate:
            type: "string"
            description: "Availability start date. If not informed, the availabilty is already avaliable."
            example: "05/01/2021"
          endDate:
            type: "string"
            description: "Availability end date. If not informed, the availabilty is always avaliable."
            example: "05/30/2021"
          hours:
            type: "array"
            description: "Hours"
            items:
              allOf:
                - $ref: "#/components/schemas/Hours"

      MerchantStatus:
        type: "object"
        title: "Merchant Status"
        required: ["lastRead", "status"]
        properties:
          lastRead:
            type: "string"
            format: "date-time"
            description: "Date of last attempt to read merchant information. \n\n(UTC date-time in ISO timestamp format)."
          status:
            type: "string"
            description: "Reading attempt status"
            enum:
              - SUCCESS
              - PROCESSING
              - FAIL
          moreInfo:
            type: "string"
            description: "Open field to provide any relevant information to the caller. Eg: Error messages or causes."

      MerchantUpdate:
        type: object
        required: [""]
        discriminator:
          propertyName: entityType
          mapping:
            SERVICE: "#/components/schemas/ServiceUpdate"
            MENU: "#/components/schemas/MenuUpdate"
            CATEGORY: "#/components/schemas/CategoryUpdate"
            ITEM: "#/components/schemas/ItemUpdate"
            ITEM_OFFER: "#/components/schemas/ItemOfferUpdate"
            OPTION_GROUP: "#/components/schemas/OptionGroupUpdate"
            OPTION: "#/components/schemas/OptionUpdate"
            AVAILABILITY: "#/components/schemas/AvailabilityUpdate"
        properties:
          merchantStatus:
            allOf:
            - $ref: "#/components/schemas/Merchant/properties/status"  
          entityType:
            type: "string"
            description: "The entity type of the updated object."

      ServiceUpdate:
        description: Updated Service Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `Service` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/Service"

      MenuUpdate:
        description: Updated Menu Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `Menu` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/Menu"

      CategoryUpdate:
        description: Updated `Category` Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `Category` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/Category"

      ItemUpdate:
        description: Updated `Item` Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `Item` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/Item"                

      ItemOfferUpdate:
        description: Updated `ItemOffer` Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `ItemOffer` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/ItemOffer"

      OptionGroupUpdate:
        description: Updated `OptionGroup` Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `OptionGroup` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/OptionGroup"

      OptionUpdate:
        description: Updated `Option` Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `Option` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/Option"

      AvailabilityUpdate:
        description: Updated `Availability` Object
        allOf:
          - $ref: "#/components/schemas/MerchantUpdate"
          - type: object
            properties:
              updatedObjects:
                description: "Updated `Availability` entity objects"
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/Availability"

    #Orders

      AckEvents:
        type: "object"
        title: "Ack Events"
        required: [id, "orderId", "eventType"]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the event."
          orderId:
            $ref: "#/components/schemas/Order/properties/id"
          eventType:
            $ref: "#/components/schemas/Event/properties/eventType"

      Order:
        type: "object"
        title: "Order"
        required:
          [
            id,
            "type",
            "displayId",
            "createdAt",
            "orderTiming",
            "preparationStartDateTime",
            "merchant",
            "items",
            "total",
            "payments",
            "customer",
          ]
        properties:
          id:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the order."
          "type":
            type: "string"
            enum:
              - "DELIVERY"
              - "TAKEOUT"
          displayId:
            type: "string"
            description: "Order Id shown in the **Ordering Application** interface for the costumer."
          sourceAppId:
            type: "string"
            format: UUID
            description: "This field must be filled in with the AppId of the **Ordering Application** that originated the order. This field is to help the applications that will work as a Hub, intermediating the requests from the **Ordering Application** with the **Software Service**."
          createdAt:
            type: "string"
            format: date-time
            description: "Order creation date and time. \n\n(UTC date-time in ISO timestamp format)."
          orderTiming:
            type: "string"
            description: "Order Timing. Currently, only `INSTANT` is accepted."
            enum:
              - "INSTANT"
          preparationStartDateTime:
            type: "string"
            format: "date-time"
            description: "Suggestion for the preparation start time after Order creation. This can be used by the **Ordering Application** to inform the merchant to delay the start of the preparation for any reason. Default is the same time as the order creation time.  
                          \n\n(UTC date-time in ISO timestamp format)."
          merchant:
            type: "object"
            required: [id, "name"]
            description: "Merchant information."
            properties:
              id:
                allOf:
                  - $ref: "#/components/schemas/Merchant/properties/id"
              name:
                allOf:
                  - $ref: "#/components/schemas/BasicInfo/properties/name"
          items:
            type: "array"
            description: "Order items."
            items:
              type: "object"
              required:
                [
                  id,
                  "name",
                  "unit",
                  "quantity",
                  "unitPrice",
                  "totalPrice",
                  "externalCode",
                ]
              properties:
                id:
                  type: "string"
                  format: "UUID"
                  description: "A unique identifier of the item."
                index:
                  type: "integer"
                  description: "Item's position."
                name:
                  type: "string"
                  description: "Product name"
                externalCode:
                  type: "string"
                  description: "External product code."
                unit:
                  type: "string"
                  description: "Measure unit of the item."
                  enum:
                    - "UNIT"
                ean:
                  type: "string"
                  description: "EAN is the barcode standard used on items."
                quantity:
                  type: "number"
                  description: "Amount of items."
                specialInstructions:
                  type: "string"
                  description: "Special instructions about the items."
                unitPrice:
                  type: "object"
                  allOf:
                    - $ref: "#/components/schemas/Price"
                  description: "Price per unit."
                optionsPrice:
                  type: "object"
                  allOf:
                    - $ref: "#/components/schemas/Price"
                  description: "Pricing options."
                totalPrice:
                  type: "object"
                  description: Total Price of the item. (quantity * unitPrice + optionsPrice)
                  allOf:
                    - $ref: "#/components/schemas/Price"
                options:
                  type: "array"
                  description: "Options related to the item."
                  items:
                    type: "object"
                    required:
                      [
                        id,
                        "name",
                        "externalCode",
                        "unit",
                        "quantity",
                        "unitPrice",
                        "price",
                      ]
                    properties:
                      index:
                        type: "integer"
                        description: "Option's position."
                      id:
                        type: "string"
                        format: "UUID"
                        description: "A unique identifier of the item."
                      name:
                        type: "string"
                        description: "Options name"
                      externalCode:
                        type: "string"
                        description: "External product code."
                      unit:
                        type: "string"
                        description: "Measure unit of the item."
                      ean:
                        type: "string"
                        description: "EAN is the barcode standard used on items."
                      quantity:
                        type: "number"
                      unitPrice:
                        type: "object"
                        allOf:
                          - $ref: "#/components/schemas/Price"
                        description: "Price per unit."
                      totalPrice:
                        type: "object"
                        description: Total Price of the option. (quantity * unitPrice)
                        allOf:
                          - $ref: "#/components/schemas/Price"
                      specialInstructions:
                        type: "string"
                        description: "More instructions, if needed."
          otherFees:
            type: "array"
            description: "Other fees that may apply."
            items:
              type: "object"
              required:
                ["name", "type", "receivedBy", "receiverDocument", "price"]
              properties:
                name:
                  type: "string"
                  description: "Name related to the other fees."
                type:
                  type: "string"
                  enum:
                    - "DELIVERY_FEE"
                    - "SERVICE_FEE"
                    - "TIP"
                receivedBy:
                  type: "string"
                  enum:
                    - "MARKETPLACE"
                    - "MERCHANT"
                    - "LOGISTIC_SERVICES"
                receiverDocument:
                  type: "string"
                  description: "Mandatory for marketplace."
                price:
                  type: "object"
                  description: "The fee price"
                  allOf:
                    - $ref: "#/components/schemas/Price"
                observation:
                  type: "string"
                  description: "Any extra comments."
          discounts:
            type: "array"
            description: "Any discounts that may apply."
            items:
              type: "object"
              required: ["value", "target", "sponsorshipValues"]
              properties:
                amount:
                  type: "object"
                  description: Amount value of the discount.
                  allOf:
                    - $ref: "#/components/schemas/Price"
                target:
                  type: "string"
                  enum:
                    - "CART"
                    - "DELIVERY_FEE"
                    - "ITEM"
                targetId:
                  type: "string"
                  description: "Only mandatory for `target` = `ITEM`."
                sponsorshipValues:
                  description: "Values sponsored by either party. The sum of the amounts listed in this atribute must match the value informed in the `amount` atribute above."
                  type: "array"
                  items:
                    type: "object"
                    required: ["name", "value"]
                    properties:
                      name:
                        type: "string"
                        enum:
                          - "MARKETPLACE"
                          - "MERCHANT"
                      amount:
                        type: "object"
                        description: Discount amount given by the sponsor.
                        allOf:
                          - $ref: "#/components/schemas/Price"
          total:
            type: "object"
            required: ["items", "otherFees", "orderAmount", "discount"]
            description: "Set of fields with the sum of the values previously described in the order."
            properties:
              itemsPrice:
                type: "object"
                description: "Sum of the total price of the items listed in the `items` attribute."
                allOf:
                  - $ref: "#/components/schemas/Price"
              otherFees:
                type: "object"
                description: "Sum of the total value of other fees listed in the `otherFees` attribute. If there isn't one, use 0."
                allOf:
                  - $ref: "#/components/schemas/Price"
              discount:
                type: "object"
                description: "Sum of any discounts that may be listed in the `discounts` attribute. If there isn't one, use 0."
                allOf:
                  - $ref: "#/components/schemas/Price"
              orderAmount:
                type: "object"
                description: "The final value of the order (itemsPrice + otherFees - discounts). "
                allOf:
                  - $ref: "#/components/schemas/Price"
          payments:
            type: "object"
            required: ["prepaid", "pending", "methods"]
            description: "All the description of the payment, such as methods, pre-payments, change, etc."
            properties:
              prepaid:
                type: "number"
                description: "Amount paid in advance."
              pending:
                type: "number"
                description: "Amount that is still to be paid."
              methods:
                type: "array"
                description: "The payment method used. Whether it was online, on delivery, credit card, voucher, cash, etc."
                items:
                  type: "object"
                  required: ["value", "currency", "type", "method"]
                  properties:
                    value:
                      type: "number"
                      format: "decimal"
                      description: "Price value. 4 decimals places are accepted"
                    currency:
                      allOf:
                        - $ref: "#/components/schemas/Price/properties/currency"
                    type:
                      type: "string"
                      description: "`PREPAID` if the payment was made through some platform, or `PENDING` if it going to be paid on delivery or in cash, for example."
                      enum:
                        - "PREPAID"
                        - "PENDING"
                    method:
                      type: "string"
                      enum:
                        - "CREDIT"
                        - "DEBIT"
                        - "MEAL_VOUCHER"
                        - "FOOD_VOUCHER"
                        - "DIGITAL_WALLET"
                        - "PIX"
                        - "CASH"
                        - "CREDIT_DEBIT"
                        - "COUPON"
                        - "REDEEM"
                        - "PREPAID_REDEEM"
                        - "OTHER"
                    methodInfo:
                      type: "string"
                      description:
                        "Additional information regarding the payment method.
                        \nRecommended if `method` is `OTHER`."
                    changeFor:
                      type: "number"
                      format: "decimal"
                      description: "Only mandatory for `CASH` method."
          customer:
            type: "object"
            required:
              [id, "phone", "documentNumber", "name", "ordersCountOnMerchant"]
            description: "Customer related information."
            properties:
              id:
                type: "string"
                format: "UUID"
                description: "A unique identifier related to the consumer."
              phone:
                type: "object"
                required: ["number"]
                properties:
                  number:
                    type: "string"
                  extension:
                    type: "string"
              documentNumber:
                description: "Consumer document."
                type: "string"
              name:
                type: "string"
                description: "Consumer's name."
              ordersCountOnMerchant:
                description: "Total number of orders that the consumer already placed within the merchant."
                type: "number"
          delivery:
            type: "object"
            description: "If the chosen `type` is `DELIVERY`, then `TAKEOUT` is not required."
            required:
              ["deliveredBy", "deliveryAddress", "estimatedDeliveryDateTime"]
            properties:
              deliveredBy:
                type: "string"
                enum:
                  - "MERCHANT"
                  - "MARKETPLACE"
              deliveryAddress:
                type: "object"
                description: "The address to which the order will be delivered."
                required:
                  [
                    "country",
                    "street",
                    "formattedAddress",
                    "number",
                    "city",
                    "postalCode",
                    "coordinates",
                    "district",
                    "state",
                  ]
                properties:
                  country:
                    type: "string"
                    pattern: "^[A-Z]{2}$"
                    description: "Two-letter [ISO 3166-1 alpha-2](https://www.iso.org/standard/72482.html) country code."
                    example: "BR"
                  state:
                    type: "string"
                    description: "State or country subdivision. It is recommended (but not required) that you use the [ISO 3166-2](https://www.iso.org/standard/72483.html) representation. "
                    example: "BR-SP"
                  city:
                    type: "string"
                    description: "City name."
                    example: "São Paulo"
                  district:
                    type: "string"
                    description: "Neighborhood or District."
                    example: "Moema"
                  street:
                    type: "string"
                    description: "Street name."
                    example: "Plaza Avenue"
                  number:
                    type: "string"
                    description: "Street number."
                    example: "100"
                  complement:
                    type: "string"
                    description: "Address complement."
                    example: "BL 02 AP 31"
                  reference:
                    type: "string"
                    description: "Address reference." 
                    example: "Yellow House"
                  formattedAddress:
                    type: "string"
                    description: "Full Formated Address Text"
                    example: "Plaza Avenue, 100, BL 02 AP 31, Moema - São Paulo, SP - Brazil"
                  postalCode:
                    type: "string"
                    description: "Postal Code"
                    example: "20111-000"
                  coordinates:
                    type: "object"
                    required: ["latitude", "longitude"]
                    properties:
                      latitude:
                        type: "number"
                        description: "Latitude in degrees. Values are restricted to the range [[-90, 90]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
                        example: -23.54823
                      longitude:
                        type: "number"
                        description: "Longitude in degrees. Values are restricted to the range [[-180, 180]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
                        example: -46.63632
              estimatedDeliveryDateTime:
                type: "string"
                format: date-time
                description: "Estimated delivery date and time. The same date showed to the costumer, in the **Ordering Application** interface. \n\n(UTC date-time in ISO timestamp format)."
              deliveryDateTime:
                type: "string"
                format: date-time
                description: "Delivery date. The date time that the delivery actually took place. \n\n(UTC date-time in ISO timestamp format)."
          takeout:
            type: "object"
            description: "If the chosen `type` is `TAKEOUT`, `DELIVERY` is not required."
            required: ["mode", "takeoutDateTime"]
            properties:
              mode:
                type: "string"
                enum:
                  - "DEFAULT"
                  - "PICKUP_AREA"
              takeoutDateTime:
                type: "string"
                format: date-time
                description: "Takeout date and time. It can be calculated by the **Ordering Application** using the average preparation time of the dishes. Default is the same time as order creation time. \n\n(UTC date-time in ISO timestamp format)."
          extraInfo:
            type: "string"
            description: "Extra information, if necessary."

      OrderConfirmed:
        type: "object"
        title: "Order Confirmed"
        required: ["createdAt", "orderExternalCode"]
        properties:
          reason:
            type: "string"
            description: "Free field for more information about the order confirmation, such as which employee accepted the order, for example."
          createdAt:
            type: "string"
            format: date-time
            description: "Order creation date and time. \n\n(UTC date-time in ISO timestamp format)."
          orderExternalCode:
            type: "string"
            description: "External order code, which can be used by merchant or marketplace."

      RequestCancelled:
        type: "object"
        title: "Request Cancelled"
        required: ["reason", "code", "mode"]
        properties:
          reason:
            type: "string"
            description: "Open text field indicating the reason for the cancellation."
          code:
            type: "string"
            enum:
              - SYSTEMIC_ISSUES
              - DUPLICATE_APPLICATION
              - UNAVAILABLE_ITEM
              - RESTAURANT_WITHOUT_DELIVERY_MAN
              - OUTDATED_MENU
              - ORDER_OUTSIDE_THE_DELIVERY_AREA
              - BLOCKED_CUSTOMER
              - OUTSIDE_DELIVERY_HOURS
              - INTERNAL_DIFFICULTIES_OF THE RESTAURANT
              - RISK_AREA
          mode:
            type: "string"
            enum:
              - "AUTO"
              - "MANUAL"
          outOfStockItems:
            type: "array"
            description: "Items that are not in the merchant's inventory."
            items:
              format: UUID
              type: string
          invalidItems:
            type: "array"
            description: "Items that do not exist in the merchant's inventory."
            items:
              format: "UUID"
              type: string

      RequestDenied:
        type: "object"
        title: "Request Cancelled"
        required: ["reason", "code"]
        properties:
          reason:
            type: "string"
            description: "Open text field indicating the reason for the cancellation."
          code:
            type: "string"
            enum:
              - "DISH_ALREADY_DONE"
              - "OUT_FOR_DELIVERY"

      Event:
        type: "object"
        title: "Event"
        required: ["eventId", "eventType", "orderId", "orderURL", "createdAt"]
        discriminator:
          propertyName: eventType
          mapping:
            CREATED: "#/components/schemas/EventMetadata"
            CONFIRMED: "#/components/schemas/EventMetadataConfirm"
            READY_FOR_PICKUP: "#/components/schemas/EventMetadata"
            DISPATCHED: "#/components/schemas/EventMetadata"
            PICKUP_AREA_ASSIGNED: "#/components/schemas/EventMetadataPickup"
            CONCLUDED: "#/components/schemas/EventMetadata"
            ORDER_CANCELLATION_REQUESTED: "#/components/schemas/EventMetadataCancel"
            CANCELLATION_REQUESTED: "#/components/schemas/EventMetadataCancel"
            CANCELLATION_REQUEST_DENIED: "#/components/schemas/EventMetadataCancel"
            CANCELLED: "#/components/schemas/EventMetadataCancel"
        properties:
          eventId:
            type: "string"
            format: "UUID"
            description: "A unique identifier of the event."
          eventType:
            type: "string"
            description: "The event type. **[Click here](#operation/pollingEvents)** for definitions of each type."
            enum:
              - "CREATED"
              - "CONFIRMED"
              - "DISPATCHED"
              - "READY_FOR_PICKUP"
              - "PICKUP_AREA_ASSIGNED"
              - "CONCLUDED"
              - "CANCELLATION_REQUESTED"
              - "CANCELLATION_REQUEST_DENIED"
              - "CANCELLED"
              - "ORDER_CANCELLATION_REQUEST"
          orderId:
            allOf:
              - $ref: "#/components/schemas/Order/properties/id"
          orderURL:
            type: "string"
            format: "uri"
            description: "The URL to get the order details"
          createdAt:
            type: "string"
            format: date-time
            description: "Order creation date and time. \n\n(UTC date-time in ISO timestamp format)."
          sourceAppId:
            type: "string"
            format: UUID
            description: "This field must be filled in with the AppId of the **Ordering Application** that originated the order. This field is to help the applications that will work as a Hub, intermediating the requests from the **Ordering Application** with the **Software Service**."

      EventMetadataCancel:
        description: Metadata
        required: ["metadata"]
        allOf:
          - $ref: "#/components/schemas/Event"
          - type: object
          - properties:
              metadata:
                required: ["reason", "code"]
                type: object
                description: "Information related to the Event Type"
                properties:
                  reason:
                    type: "string"
                    description: "Reason for the cancellation"
                  code:
                    type: "string"
                    description: "Cancelation reason code"
                    enum:
                      - CONSUMER_CANCELLATION_REQUESTED
                      - OTHER_CANCELLATION_REASON
                  clientId:
                    type: "string"
                    description: "The ID of the client system that generated the action that resulted in this event (to be used with application with multiple stations)."

      EventMetadata:
        description: Metadata
        allOf:
          - $ref: "#/components/schemas/Event"

      EventMetadataPickup:
        description: Metadata
        allOf:
          - $ref: "#/components/schemas/Event"
          - type: object
          - properties:
              metadata:
                type: object
                description: "Information related to the Event Type"
                required: ["pickupArea"]
                properties:
                  pickupArea:
                    type: "string"
                    description: "Information about the pickup area that the merchant needs to deliver the order. Eg: Parking Lot Number"

      EventMetadataConfirm:
        description: Metadata
        required: ["metadata"]
        allOf:
          - $ref: "#/components/schemas/Event"
          - type: object
          - properties:
              metadata:
                type: object
                description: "Information related to the Event Type"
                properties:
                  # expectedPreparationStartTime: Removed field. See Issue (https://github.com/Abrasel-Nacional/Open-Delivery-Beta-Test/issues/7)
                  #   type: "string"
                  #   format: "date-time"
                  #   description: "Expected preparation start time after Order Confirmation. This can be used by the **Ordering Application** to inform the merchant to delay the start of the preparation for any reason."
                  clientId:
                    type: "string"
                    description: "The ID of the client system that generated the action that resulted in this event (to be used with application with multiple stations)"

    #Common
    
      Address:
        type: "object"
        title: "Address"
        required:
          [
            "country",
            "state",
            "city",
            "district",
            "street",
            "number",
            "postalCode",
            "complement",
            "latitude",
            "longitude",
          ]
        properties:
          "country":
            type: "string"
            pattern: "^[A-Z]{2}$"
            description: "Two-letter [ISO 3166-1 alpha-2](https://www.iso.org/standard/72482.html) country code."
            example: "BR"
          state:
            type: "string"
            description: "State or country subdivision. It is recommended (but not required) that you use the [ISO 3166-2](https://www.iso.org/standard/72483.html) representation. "
            example: "BR-SP"
          "city":
            type: "string"
            description: "City name."
            example: "São Paulo"
          "district":
            type: "string"
            description: "District or Neighborhood name."
            example: "Moema"
          "street":
            type: "string"
            description: "Street Name."
            example: "Plaza Avenue"
          "number":
            type: "string"
            description: "Street Number."
            example: "100"
          "postalCode":
            type: "string"
            description: "Postal Code"
            example: "20111-000"
          "complement":
            type: "string"
            description: "Address complement."
            example: "BL 02 AP 31"
          "reference":
            type: "string"
            description: "Address reference." 
            example: "Yellow House"  
          "latitude":
            type: "number"
            description: "Latitude in degrees. Values are restricted to the range [[-90, 90]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
            example: -23.54809
          "longitude":
            type: "number"
            description: "Longitude in degrees. Values are restricted to the range [[-180, 180]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
            example: -46.63638

      AddressLogistics:
        type: "object"
        title: "Address"
        required:
          [
            "country",
            "state",
            "city",
            "district",
            "street",
            "number",
            "postalCode",
            "complement",
          ]
        properties:
          "country":
            type: "string"
            pattern: "^[A-Z]{2}$"
            description: "Two-letter [ISO 3166-1 alpha-2](https://www.iso.org/standard/72482.html) country code."
            example: "BR"
          state:
            type: "string"
            description: "State or country subdivision. It is recommended (but not required) that you use the [ISO 3166-2](https://www.iso.org/standard/72483.html) representation. "
            example: "BR-SP"
          "city":
            type: "string"
            description: "City name."
            example: "São Paulo"
          "district":
            type: "string"
            description: "District or Neighborhood name."
            example: "Moema"
          "street":
            type: "string"
            description: "Street Name."
            example: "Plaza Avenue"
          "number":
            type: "string"
            description: "Street Number."
            example: "100"
          "postalCode":
            type: "string"
            description: "Postal Code"
            example: "20111-000"
          "complement":
            type: "string"
            description: "Address complement."
            example: "BL 02 AP 31"
          "reference":
            type: "string"
            description: "Address reference." 
            example: "Yellow House"  
          "latitude":
            type: "number"
            description: "Latitude in degrees. Values are restricted to the range [[-90, 90]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
            example: -23.54809
          "longitude":
            type: "number"
            description: "Longitude in degrees. Values are restricted to the range [[-180, 180]].\n\n\n\nThe precision should be **at least 5 decimal places (multipleOf: 0.00001)**."
            example: -46.63638

      ContactPhones:
        type: "object"
        title: "Contact Phones"
        required: ["commercialNumber"]
        properties:
          "commercialNumber":
            type: "string"
            description: "Telephone number of the merchant"
            example: "11999999999"
          "whatsappNumber":
            type: "string"
            description: "Whatsapp number of the merchant"
            example: "11998888888"

      Price:
        type: "object"
        title: "Price"
        required: ["value", "currency"]
        properties:
          value:
            type: "number"
            format: "decimal"
            description: "Price value. 4 decimals places are accepted"
            example: 40
          currency:
            type: "string"
            pattern: "^[A-Z]{3}$"
            description: "The 3-letter ISO 4217 currency code."
            example: "BRL"

      Repository:
        type: "object"
        title: "Repository"
        required:
          [
            "document",
            "corporateName",
            "postalCode",
            "email",
            "website",
            "baseApiUrl",
            "TTL",
            "hostCompanyDocument",
          ]
        properties:
          document:
            type: "string"
            description: "Company registration document"
            pattern: "/^\\d{14}$/"
          corporateName:
            type: "string"
            description: "Corporate Name"
            maxLength: 500
          postalCode:
            type: "string"
            description: "Postal Code"
          email:
            type: "string"
            description: "Contact Email. It is recommended that a contact be made available to deal with specific **Open Delivery** issues."
          website:
            type: "string"
            format: "URL"
            description: "Company Website. It is recommended to have a website (or landing page) with information about how the company works with Open Delivery."
          baseApiUrl:
            type: "string"
            format: "URL"
            description: "Base URL of the endpoints with the company's data. It will be used by the indexing system to search the establishments under the responsibility of the menu software (see endpoint) and to search public menus (see endpoint)."
          hostCompanyDocument:
            type: "string"
            description: "**Software Service** registration document that provides the merchant information."
            pattern: "/^\\d{14}$/"
          TTL:
            type: "integer"
            description: "Time to Live (in seconds).
              \nA new request must be done when the TTL expires."

      Error:
        type: object
        required: ["title", "status"]
        properties:
          title:
            type: string
            description: "Short description of the problem."
            example: "Unexpected error"
          status:
            type: integer
            description: "HTTP code of the returned status."
            example: 500

      Image:
        description: Image Object
        type: object
        required: ["URL", "CRC"]
        properties:
          URL:
            type: "string"
            format: "uri"
            description:
              "URL pointing to an image of the merchant logo.\n\n Image requirements:
              \n - Hosted on a secure connection (SSL).
              \n - File size must be less than 10MB.
              \n - Image must be in JPEG, PNG or GIF format.
              \n - Both width and height must be between 320px and 1144px."
            example: "https://food-company.com/image.jpg"
          CRC-32:
            type: string
            format: "CRC32"
            description: "CRC-32 of the image file. This field can be used to check for changes in the image file."
            example: "96b41025"

  examples:

    tokenExample:
      summary: New Token
      value:
        client_id: "user1234"
        client_secret: "ty23yhmas4ldfias9834023jsdf032j023f02"
        grant_type: "client_credentials"

    orderExample:
      summary: "Sample Order"
      value:
        id: "4818e72f-2304-466f-9fe7-af08f34ac4ed"
        type: "DELIVERY"
        displayId: "12345"
        createdAt: "2021-05-27T19:38:10.332Z"
        orderTiming: "INSTANT"
        preparationStartDateTime: "2021-05-27T19:45:10.332Z"
        merchant:
          id: 7fb59cb8-5808-40c8-b967-1b3f20ee39cd"
          name: "Plaza Pizza"
        items:
          [
            {
              id: 732bd31e-77fc-47ee-88ee-a0437f97b198",
              index: 0,
              name: "Medium - 2 flavors",
              externalCode: "22",
              unit: "UNIT",
              quantity: 1,
              specialInstructions: "Do not put onions.",
              unitPrice: { value: 43.00, currency: "BRL" },
              optionsPrice: { value: 50.00, currency: "BRL" },
              totalPrice: { value: 50.00, currency: "BRL" },
              options:
                [
                  {
                    id: e5232f14-430c-4a94-8ff6-289d5a16a87a",
                    name: "1/2 Pepperoni",
                    externalCode: "23",
                    unit: "UNIT",
                    quantity: 1,
                    unitPrice: { value: 50.00, currency: "BRL" },
                    price: { value: 50.00, currency: "BRL" },
                    specialInstructions: "None",
                  },
                  {
                    id: 7e507cab-7235-4f75-a0c2-e955fb2f2048",
                    name: "1/2 Mozzarella",
                    externalCode: "24",
                    unit: "UNIT",
                    quantity: 1,
                    unitPrice: { value: 30.00, currency: "BRL" },
                    price: { value: 30.00, currency: "BRL" },
                    specialInstructions: "None",
                  },
                ],
            },
          ]
        otherFees:
          [
            {
              name: "Delivery",
              type: "DELIVERY_FEE",
              receivedBy: "MARKETPLACE",
              receiverDocument: "1234",
              price: { value: 5.00, currency: "BRL" },
              observation: "None",
            },
          ]
        discounts:
          [
            {
              amount: { value: 20.00, currency: "BRL" },
              target: "DELIVERY_FEE",
              sponsorshipValues:
                [
                  {
                    name: "MARKETPLACE",
                    amount: { value: 10.00, currency: "BRL" },
                  },
                  {
                    name: "MERCHANT",
                    amount: { value: 10.00, currency: "BRL" },
                  },
                ],
            },
          ]
        total:
          {
            itemsPrice: { value: 50.00, currency: "BRL" },
            otherFees: { value: 5.00, currency: "BRL" },
            discount: { value: 20.00, currency: "BRL" },
            orderAmount: { value: 35.50, currency: "BRL" },
          }
        payments:
          prepaid: 55.00
          pending: 0
          methods:
            [
              {
                value: 55.00,
                currency: "BRL",
                method: "FOOD_VOUCHER",
                methodInfo: "None",
              },
            ]
        customer:
          id: d9730653-a8ba-4e85-8dbb-b5697e6ae8d5"
          phone:
            number: "11999999999"
            extension: "0"
          documentNumber: "12345"
          name: "John"
          ordersCountOnMerchant: 1
        delivery:
          deliveredBy: "MERCHANT"
          deliveryAddress:
            country: "BR"
            streetName: "Gomes de Carvalho Street"
            formattedAddress: "string"
            streetNumber: "100"
            city: "São Paulo"
            postalCode: "20111-000"
            coordinates:
              latitude: -23.54754
              longitude: -46.63611
            neighborhood: "Moema"
            state: "SP"
            complement: "102"
        estimatedDeliveryDateTime: "2021-05-27T20:45:10.332Z"
        deliveryDateTime: "2021-05-27T20:47:10.443Z"
        extraInfo: "None"

    merchantExample:
      summary: "Merchant Example"
      value:
        lastUpdate: "2021-05-27T20:45:10.332Z"
        TTL: 500
        id: "22815773000169-dbc7e35a-c936-4665-9e13-eb55eb8b6824"
        status: "AVAILABLE"
        basicInfo:
          name: "Pizza Plaza"
          document: "22815773000169"
          corporateName: "Food Company"
          description: "Food company specializing in pizzas."
          averageTicket: 90.00
          averagePreparationTime: 20
          minOrderValue:
            value: 20.00
            currency: "BRL"
          merchantType: "RESTAURANT"
          merchantCategories: ["PIZZA", "FAMILY_MEALS", "PREMIUM"]
          address:
            country: "BR"
            state: "SP"
            city: "São Paulo"
            district: "Moema"
            street: "Plaza Avenue"
            number: "100"
            postalCode: "20111-000"
            complement: "2001"
            reference: "Yellow house"
            latitude: -23.54804
            longitude: -46.63630
          contactEmails: ["food@company.com"]
          contactPhones:
            { commercialNumber: "11999999999", whatsappNumber: "11998888888" }
          logoImage:
            URL: "https://food-company.com/logo.png"
            CRC-32: 432098ASDSR
          bannerImage:
            URL: "https://food-company.com/banner.png"
            CRC-32: 09345UIHF98
          createdAt: "2021-05-10T20:45:10.332Z"
        services:
          [
            {
              id: "f078e8e2-3044-4eec-b4a8-8359810de123",
              status: "AVAILABLE",
              serviceType: "DELIVERY",
              menuId: "f627ccdc-6789-456f-a782-148538d5035b",
              serviceArea: {
                "id": "f078e8e2-3044-4eec-b4a8-8359810de124",
                "polygon": [
                    {
                        "geoCoordinates": [
                            {
                                "latitude": -20.23330,
                                "longitude": -20.83830
                            },
                            {
                                "latitude": -20.85008,
                                "longitude": -21.00007
                            },
                            {
                                "latitude": -21.15002,
                                "longitude": -21.95483
                            }
                        ],
                        "price": {
                            "value": 5,
                            "currency": "BRL"
                        },
                        "estimateDeliveryTime": 25
                    }
                ],
                "geoRadius": {
                    "geoMidpointLatitude": -20.2333,
                    "geoMidpointLongitude": -20.8383,
                    "radius": [
                        {
                            "size": 10,
                            "price": {
                                "value": 5.50,
                                "currency": "BRL"
                            },
                            "estimateDeliveryTime": 10
                        }
                    ]
                }
            },
              serviceHours:
                {
                  id: "fb093d8c-2ca5-40fb-afcf-472fbdae81cc",
                  weekHours:
                    [
                      {
                        dayOfWeek:
                          [
                            "MONDAY",
                            "TUESDAY",
                            "WEDNESDAY",
                            "THURSDAY",
                            "FRIDAY",
                          ],                     
                      timePeriods:
                        {
                          startTime: "10:00:00.000Z",
                          endTime: "18:00:00.000Z",
                        }
                      },
                      {
                        dayOfWeek:
                          [
                            "SATURDAY",
                            "SUNDAY",
                          ],                     
                      timePeriods:
                        {
                          startTime: "14:00:00.000Z",
                          endTime: "18:00:00.000Z",
                        }
                      }
                    ],
                  holidayHours:
                    [
                      {
                        date: "2021-05-27",
                        timePeriods:
                          {
                            startTime: "12:00:00.000Z",
                            endTime: "17:00:00.000Z",
                          },
                      },
                    ],
                },
            },
          ]
        items:
          [
            {
              id: "732bd31e-77fc-47ee-88ee-a0437f97b198",
              name: "Medium - 2 flavors",
              description: "Medium two-flavored pizza.",
              externalCode: "23",
              image:
                {
                  URL: "https://www.food-place.com/images/medium-pizza.png",
                  CRC-32: 09345UIHF98,
                },
              serving: 8,
              unit: "unit",
            },
            {
              id: "b728fd88-4af0-43f7-956f-95c251f01ddd",
              name: "Small - 1 flavor",
              description: "Small one-flavored pizza.",
              externalCode: "23",
              image:
                {
                  URL: "https://www.food-place.com/images/small-pizza.png",
                  CRC-32: 09345UIHF98,
                },
              serving: 4,
              unit: "unit",
            },
            {
              id: "502ecf11-0509-48ed-b63c-6211c48fd9b9",
              name: "1/2 Pepperoni",
              description: "Pepperoni flavored pizza with LOTS of pepperoni.",
              externalCode: "23",
              image:
                {
                  URL: "https://www.food-place.com/images/pepperoni.png",
                  CRC-32: 09345UIHF98,
                },
              nutritionalInfo:
                {
                  description: "Contains preservatives",
                  calories: "2000 Cal",
                  allergen: ["GLUTEN"],
                },
              unit: "unit",
            },
            {
              id: 7e507cab-7235-4f75-a0c2-e955fb2f2048,
              name: "1/2 Mozzarella",
              description: "Delicious mozzarella pizza.",
              externalCode: "24",
              image:
                {
                  URL: "https://www.food-place.com/images/mozzarella.png",
                  CRC-32: 09345UIHF98,
                },
              nutritionalInfo:
                {
                  description: "Contains preservatives",
                  calories: "2500 Cal",
                  allergen: ["GLUTEN", "LACTOSE"],
                },
              unit: "unit",
            },
            {
              id: 2c0f3447-5309-49cc-a167-4eac5c664470,
              name: "Banana",
              description: "Banana Pizza with cream.",
              externalCode: "25",
              image:
                {
                  URL: "https://www.food-place.com/images/banana.png",
                  CRC-32: 09345UIHF98,
                },
              nutritionalInfo:
                {
                  description: "Contains preservatives",
                  calories: "2500 Cal",
                  allergen: ["GLUTEN"],
                },
              unit: "unit",
            },
          ]
        menus:
          [
            {
              id: f627ccdc-6789-456f-a782-148538d5035b",
              name: "Pizzas",
              description: "Pizza menu",
              externalCode: "123",
              disclaimer: "Lorem Ipsum is simply dummy text of the printing and typesetting industry.",
              categoryId:
                [
                  "92fad022-2c28-4239-a026-989f5b555cb7",
                  "6bb71850-1d40-49f9-8046-b13e068c0cca",
                ],
            },
          ]
        categories:
          [
            {
              id: 92fad022-2c28-4239-a026-989f5b555cb7",
              index: 0,
              name: "Salted Pizza",
              description: "Salted pizza flavors.",
              image:
                {
                  URL: "https://food-company.com/category1.png",
                  CRC-32: 09345UIHF98
                },
              externalCode: "13",
              status: "AVAILABLE",
              availabilityId:
                ["11d063c4-73a7-4f87-a0eb-71636cc02029"],
              itemOfferId:
                ["f080cfb3-5c4a-4eb7-907d-2de3bbb5dfb9"],
            },
            {
              id: 6bb71850-1d40-49f9-8046-b13e068c0cca",
              index: 1,
              name: "Sweeted Pizza",
              description: "Sweeted pizza flavors.",
              image:
                {
                  URL: "https://food-company.com/category2.png",
                  CRC-32: 09345UIHF98
                },
              externalCode: "13",
              status: "AVAILABLE",
              availabilityId:
                ["11d063c4-73a7-4f87-a0eb-71636cc02029"],
              itemOfferId:
                ["377b99ba-5413-43d1-b875-7cdcaa72860e"],
            },
          ]
        itemOffers:
          [
            {
              id: f080cfb3-5c4a-4eb7-907d-2de3bbb5dfb9,
              itemId: 732bd31e-77fc-47ee-88ee-a0437f97b198,
              index: 0,
              price: { value: 43.00, originalValue: 43.00, currency: "BRL" },
              availabilityId:
                ["11d063c4-73a7-4f87-a0eb-71636cc02029"],
              optionGroupsId:
                ["fe67e551-f42f-499a-8afb-0ed893c71fa3"],
            },
            {
              id: 377b99ba-5413-43d1-b875-7cdcaa72860e,
              itemId: 7e507cab-7235-4f75-a0c2-e955fb2f2048,
              index: 1,
              price: { value: 30.00, originalValue: 30.00, currency: "BRL" },
              availabilityId:
                ["11d063c4-73a7-4f87-a0eb-71636cc02029"],
              optionGroupsId:
                ["c524c066-96fa-458d-b78c-3712661529b3"],
            },
          ]
        optionGroups:
          [
            {
              id: fe67e551-f42f-499a-8afb-0ed893c71fa3,
              index: 0,
              name: "Choose your salted pizza flavor",
              description: "Choose your salted pizza flavor.",
              externalCode: "12",
              status: "AVAILABLE",
              minPermitted: 2,
              maxPermitted: 2,
              options:
                [
                  {
                    id: e5232f14-430c-4a94-8ff6-289d5a16a87a,
                    itemId: 502ecf11-0509-48ed-b63c-6211c48fd9b9,
                    index: 0,
                    price:
                      { value: 50.00, originalValue: 50.00, currency: "BRL" },
                    maxPermitted: 1,
                  },
                  {
                    id: e5232f14-430c-4a94-8ff6-289d5a16a87b,
                    itemId: 7e507cab-7235-4f75-a0c2-e955fb2f2048,
                    index: 1,
                    price:
                      { value: 43.00, originalValue: 43.00, currency: "BRL" },
                    maxPermitted: 1,
                  },
                ],
            },
            {
              id: c524c066-96fa-458d-b78c-3712661529b3,
              index: 0,
              name: "Choose your sweeted pizza flavor",
              description: "Choose your sweeted pizza flavor.",
              externalCode: "12",
              status: "AVAILABLE",
              minPermitted: 1,
              maxPermitted: 1,
              options:
                [
                  {
                    id: 2419d582-357f-4149-9089-12321537f147,
                    itemId: 2c0f3447-5309-49cc-a167-4eac5c664470,
                    index: 0,
                    price:
                      { value: 30.00, originalValue: 30.00, currency: "BRL" },
                    maxPermitted: 1,
                  },
                ],
            },
          ]
        availabilities:
          [
            {
              id: 11d063c4-73a7-4f87-a0eb-71636cc02029",
              startDate: "05/01/2021",
              endDate: "05/30/2021",
              hours: [
                      {
                        dayOfWeek:
                          [
                            "MONDAY",
                            "TUESDAY",
                            "WEDNESDAY",
                            "THURSDAY",
                            "FRIDAY",
                          ],                     
                      timePeriods:
                        {
                          startTime: "10:00:00.000Z",
                          endTime: "18:00:00.000Z",
                        }
                      },
                      {
                        dayOfWeek:
                          [
                            "SATURDAY",
                            "SUNDAY",
                          ],                     
                      timePeriods:
                        {
                          startTime: "14:00:00.000Z",
                          endTime: "18:00:00.000Z",
                        }
                      }
                    ]}]